{"version":3,"file":"index.js","sources":["../src/models.ts","../src/composables.ts","../src/components/OxCountryInput.vue","../src/components/OxIbanInput.vue","../src/components/OxCurrencyInput.vue","../src/components/OxContinentInput.vue","../src/components/OxCountryEdit.vue","../src/components/OxCountryPanel.vue","../src/components/OxCurrencyEdit.vue","../src/components/OxCurrencyPanel.vue","../src/app.ts","../src/index.ts"],"sourcesContent":["import { models, t } from \"@oxylus/ox\"\n\n\nexport class Currency extends models.Model {\n    static entity = \"currencies\"\n    static meta = new models.Meta({\n        app: \"ox_locations\",\n        model: \"currency\",\n        url: \"ox/locations/currency/\",\n        title: \"name\"\n    })\n\n    static fields() {\n        return {\n            id: this.attr(null),\n            name: this.string(\"\"),\n            code: this.string(\"\"),\n            numeric: this.string(\"\"),\n            decimals: this.number(2),\n            is_iso: this.boolean(false),\n            valid_to: this.string(null)\n        }\n    }\n}\n\n\nexport class Country extends models.Model {\n    static entity = \"countries\"\n    static meta = new models.Meta({\n        app: \"ox_locations\",\n        model: \"country\",\n        url: \"ox/locations/country/\",\n        title: \"name\"\n    })\n\n    static _continentItems : Record<string, string>\n\n    static fields() {\n        return {\n            id: this.attr(null),\n            name: this.string(\"\"),\n            code: this.string(\"\"),\n            code_3: this.string(\"\"),\n            phone: this.number(null),\n            continent: this.number(1),\n            currency_code: this.string(\"\"),\n            currency: this.string(\"\"),\n\n            iban_sample: this.string(\"\"),\n            iban_length: this.number(34),\n\n            $currency: this.belongsTo(Currency, 'currency')\n        }\n    }\n\n    code: string\n\n    static Continent = models.Enum('continent', {\n        AFRICA: 1,\n        ANTARCTICA: 2,\n        ASIA: 3,\n        EUROPE: 4,\n        NORTH_AMERICA: 5,\n        OCEANIA: 6,\n        SOUTH_AMERICA: 7,\n    })\n\n    get flag() {\n        if (typeof this.code !== 'string' || this.code.length !== 2)\n            return ''\n\n        const OFFSET = 0x1F1E6\n        const chars = this.code.toUpperCase().split('')\n        const isValid = chars.every((c: string) => c >= 'A' && c <= 'Z')\n\n        return isValid\n            ? String.fromCodePoint(...chars.map(c => OFFSET + c.charCodeAt(0) - 65))\n            : ''\n    }\n}\n","import { useModels, query } from '@oxylus/ox'\nimport { Country, Currency } from './models'\n\n\n/** Use @oxylus/locations models. */\nexport function useLocationModels() {\n    const repos = useModels([Country, Currency], {useDefaults: false})\n    //query(repos.countries).allOnce()\n    //query(repos.currencies).allOnce()\n    return repos\n}\n\n\n/** Return repository of Country and load data if not there yet */\nexport function useCountries() {\n    const { countries } = useModels([Country], {useDefaults: false})\n    //query(countries).allOnce()\n    return {countries}\n}\n\n\n/** Return repository of Country and load data if not there yet */\nexport function useCurrencies() {\n    const { currencies } = useModels([Currency], {useDefaults: false})\n    //query(currencies).allOnce()\n    return {currencies}\n}\n","<template>\n    <ox-autocomplete :repo=\"repos.countries\" lookup=\"name__icontains\"\n        item-value=\"id\" item-title=\"name\"\n        v-model=\"value\"\n        v-bind=\"attrs\"\n        >\n        <template #selection=\"{ item }\">\n            <span class=\"mr-2\">{{ item.raw.flag }}</span>\n            {{ item.raw.name }}\n        </template>\n        <template #item=\"{ props, item }\">\n            <v-list-item v-bind=\"props\">\n                <template #prepend>\n                    <span class=\"mr-2\">{{ item.raw.flag }} </span>\n                </template>\n            </v-list-item>\n        </template>\n\n        <template v-for=\"_, slot in slots\" #[slot]=\"bind\">\n            <slot :name=\"slot\" v-bind=\"bind\"/>\n        </template>\n    </ox-autocomplete>\n</template>\n<script setup lang=\"ts\">\nimport {useAttrs, useSlots, defineModel, defineProps} from 'vue'\nimport {query} from '@oxylus/ox'\nimport {OxAutocomplete} from '@oxylus/ox/components'\nimport {useCountries} from '../composables'\n\nconst slots = useSlots()\nconst attrs = useAttrs()\nconst value = defineModel()\nconst repos = useCountries()\n</script>\n","<template>\n    <v-text-field\n        v-model=\"displayIban\"\n        :label=\"props.label || 'IBAN'\"\n        :rules=\"[validateIban]\"\n    >\n        <template #prepend-inner v-if=\"country\">\n            {{ country.flag }}\n        </template>\n        <template #append v-if=\"country && country.$currency\">\n            {{ country.$currency.code }}\n        </template>\n    </v-text-field>\n    <p v-if=\"country\" class=\"v-messages\">\n        <div v-if=\"country.iban_sample\">\n            <v-icon icon=\"mdi-help-circle-outline\"/>\n            {{ t('fields.iban.help', {'name': country.name, 'sample': country.iban_sample || '...' }) }}\n        </div>\n        <div v-else class=\"text-warning\">\n            <v-icon icon=\"mdi-alert-circle-outline\"/>\n            {{ t('fields.iban.country_without_iban', {'name': country.name}) }}\n        </div>\n    </p>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineProps, defineModel, ref, watch } from 'vue';\nimport { t, query } from '@oxylus/ox'\nimport { useLocationModels } from '../composables';\n\nconst {countries, currencies} = useLocationModels()\nquery(countries).allOnce()\nquery(currencies).allOnce()\n\nconst props = defineProps({\n    label: String,\n})\nconst rawIban = defineModel({type: String, default: ''});\nconst displayIban = ref('');\nconst countryCode = computed(() =>\n  rawIban.value.length >= 2 ? rawIban.value.substring(0, 2).toUpperCase() : ''\n);\n\nconst country = computed(() => countryCode.value && countries.where('code', countryCode.value).with('$currency').first() || null)\n\nwatch(displayIban, (val, old) => {\n    if(val != old) {\n        const raw = toRaw(val)\n        if(rawIban.value != raw)\n            rawIban.value = raw\n    }\n})\n\nwatch(rawIban, (val, old) => {\n    if(val != old) {\n        const display = toDisplay(val)\n        if(displayIban.value != display)\n            displayIban.value = display\n    }\n})\n\n\nfunction toRaw(value) {\n    return value.replace(/\\s+/g, '').toUpperCase();\n}\n\n\nfunction toDisplay(value) {\n  return value\n    .replace(/\\s+/g, '')\n    .replace(/[^A-Z0-9]/gi, '')\n    .toUpperCase()\n    .match(/.{1,4}/g)\n    ?.join(' ') || '';\n}\n\n\nfunction validateIban(value) {\n  const cleaned = value.replace(/\\s+/g, '').toUpperCase();\n\n  const expectedLen = country.value?.iban_length\n  if (cleaned.length < 15)\n      return t('fields.iban.too_short');\n\n  const rearranged = cleaned.slice(4) + cleaned.slice(0, 4);\n  const expanded = rearranged\n    .split('')\n    .map(ch => (isNaN(ch) ? ch.charCodeAt(0) - 55 : ch))\n    .join('');\n\n  const mod = BigInt(expanded) % 97n;\n  return mod === 1n || t('fields.iban.invalid_checksum');\n}\n</script>\n","<template>\n    <ox-autocomplete :repo=\"repos.currencies\" lookup=\"name__icontains\"\n        item-value=\"id\" item-title=\"name\"\n        v-model=\"value\"\n        v-bind=\"props\"\n        >\n        <template v-slot:selection=\"{ item, index }\">\n            {{ item.raw.name }}\n            <span class=\"ml-2\">{{ item.code }}</span>\n        </template>\n        <template v-slot:item=\"{ props: itemProps, item }\">\n            <v-list-item v-bind=\"itemProps\">\n                <template #append>\n                    <span class=\"ml-2\">{{ item.raw.code }} </span>\n                </template>\n            </v-list-item>\n        </template>\n\n        <template v-for=\"slot of slots\" #[slot]=\"bind\">\n            <slot :name=\"slot\" v-bind=\"bind\"/>\n        </template>\n    </ox-autocomplete>\n</template>\n<script setup lang=\"ts\">\nimport {useSlots, defineModel, defineProps} from 'vue'\nimport {query} from '@oxylus/ox'\nimport {OxAutocomplete} from '@oxylus/ox/components'\nimport {useCurrencies} from '../composables'\n\nconst slots = useSlots()\nconst props = defineProps({\n    label: String,\n    name: String,\n    multiple: Boolean,\n    hideDetails: Boolean,\n    density: String,\n    rules: Array,\n})\nconst value = defineModel()\nconst repos = useCurrencies()\n</script>\n","<template>\n    <v-select v-model=\"value\" v-bind=\"attrs\"\n        :placeholder=\"t('fields.continent')\"\n        :items=\"Country.Continent.items\">\n        <template #detail=\"bind\">\n            <slot name=\"detail\" v-bind=\"bind\"/>\n        </template>\n    </v-select>\n</template>\n<script setup lang=\"ts\">\nimport { defineModel, defineProps, useAttrs } from 'vue'\nimport { t } from '@oxylus/ox'\nimport { Country } from '../models'\n\nconst value = defineModel()\nconst attrs = useAttrs()\n</script>\n","<template>\n    <ox-model-edit ref=\"model-editor\" v-bind=\"attrs\" :repo=\"repos.countries\">\n        <template #default=\"{editor, editable}\">\n            <v-row>\n                {{ editor.value.flag }}\n                <v-col>\n                    <ox-field :editor=\"editor\" name=\"name\" required />\n                </v-col>\n                <v-col cols=\"2\">\n                    <ox-field :editor=\"editor\" name=\"code\" required />\n                </v-col>\n                <v-col cols=\"2\">\n                    <ox-field :editor=\"editor\" name=\"code_3\" required />\n                </v-col>\n            </v-row>\n\n            <ox-field :editor=\"editor\" name=\"continent\">\n                <template #default=\"{props}\">\n                    <ox-continent-input v-bind=\"props\"\n                        v-model=\"editor.value.continent\" />\n                </template>\n            </ox-field>\n\n            <ox-field :editor=\"editor\" name=\"phone\"\n                prepend-icon=\"mdi-phone\" />\n\n            <ox-field :editor=\"editor\" name=\"currency\">\n                <template #default=\"{props}\">\n                    <ox-currency-input v-bind=\"props\"\n                        v-model=\"editor.value.currency\" />\n                </template>\n            </ox-field>\n        </template>\n    </ox-model-edit>\n</template>\n<script setup lang=\"ts\">\nimport { useAttrs } from 'vue'\nimport {OxModelEdit, OxField} from '@oxylus/ox/components'\n\nimport {useLocationModels} from '../composables'\nimport OxContinentInput from './OxContinentInput.vue'\nimport OxCurrencyInput from './OxCurrencyInput.vue'\n\nconst repos = useLocationModels()\nconst attrs = useAttrs()\n</script>\n","<template>\n    <ox-model-panel v-bind=\"props\" :repo=\"repos.countries\"\n            :warning=\"t('alerts.danger_zone_system_data')\">\n        <template v-for=\"name in forwardSlots\" :key=\"name\" #[name]=\"bind\">\n            <slot :name=\"name\" v-bind=\"bind\"/>\n        </template>\n\n        <template #list.filters=\"{list,filters}\">\n            <ox-continent-input class=\"ml-3\" density=\"compact\" hide-details\n                v-model=\"filters.continent\"\n                :label=\"t('fields.continent')\" />\n\n            <slot name=\"list.filters\" :list=\"list\" :filters=\"filters\"/>\n        </template>\n\n        <template #item.name=\"{item}\" v-if=\"!slots['item.name']\">\n            {{ item.flag }} {{ item.name }}\n        </template>\n\n        <template #item.currency=\"{item}\" v-if=\"!slots['item.currency']\">\n            {{ item.$currency?.code }}\n        </template>\n\n        <template #views.detail.edit.default=\"{value, saved}\">\n            <ox-country-edit :initial=\"value\" :saved=\"saved\"/>\n        </template>\n    </ox-model-panel>\n</template>\n<script setup lang=\"ts\">\nimport { defineProps, useSlots, withDefaults } from 'vue'\n\nimport { query, t } from '@oxylus/ox'\nimport {OxModelPanel} from '@oxylus/ox/components'\nimport type {IModelPanelProps} from '@oxylus/ox'\n\nimport {useLocationModels} from '../composables'\nimport OxContinentInput from './OxContinentInput.vue'\nimport OxCountryEdit from './OxCountryEdit.vue'\n\nconst slots = useSlots()\nconst forwardSlots = Object.keys(slots).filter(x => !(['list.filters', 'top'].includes(x)))\n\nconst repos = useLocationModels()\n\n// FIXME: acquire/release\nquery(repos.currencies).allOnce()\n\nconst props = withDefaults(defineProps<IModelPanelProps>(), {\n    name: 'countries',\n    relations: ['$currency'],\n    fetchRelations: false,\n    headers: ['name', 'code', 'code_3', 'phone', 'currency'],\n})\n</script>\n","<template>\n    <ox-model-edit v-bind=\"attrs\" :repo=\"repos.currencies\">\n        <template #default=\"{editor}\">\n            <v-row>\n                <v-col>\n                    <ox-field :editor=\"editor\" name=\"name\" required/>\n                </v-col>\n                <v-col cols=\"2\">\n                    <ox-field :editor=\"editor\" name=\"code\" required/>\n                </v-col>\n                <v-col cols=\"2\">\n                    <ox-field :editor=\"editor\" name=\"numeric\" />\n                </v-col>\n            </v-row>\n            <ox-field :editor=\"editor\" name=\"is_iso\" type=\"checkbox\"/>\n            <ox-field :editor=\"editor\" name=\"valid_to\" type=\"date\"/>\n        </template>\n    </ox-model-edit>\n</template>\n<script setup lang=\"ts\">\nimport { useAttrs } from 'vue'\nimport {OxModelEdit, OxField} from '@oxylus/ox/components'\n\nimport {useCurrencies} from '../composables'\n\nconst repos = useCurrencies()\nconst attrs = useAttrs()\n</script>\n","<template>\n    <ox-model-panel v-bind=\"props\" :repo=\"repos.currencies\"\n            :warning=\"t('alerts.danger_zone_system_data')\">\n        <template v-for=\"name in forwardSlots\" :key=\"name\" #[name]=\"bind\">\n            <slot :name=\"name\" v-bind=\"bind\"/>\n        </template>\n\n        <template #list.filters=\"{list,filters}\">\n            <slot name=\"list.filters\" :list=\"list\" :filters=\"filters\"/>\n        </template>\n\n        <template #item.is_iso=\"{item}\">\n            <v-icon v-if=\"item.is_iso\" class=\"text-success\">mdi-check-circle</v-icon>\n            <v-icon v-else class=\"text-error\">mdi-close-circle</v-icon>\n        </template>\n\n        <template #views.detail.edit.default=\"{value, saved}\">\n            <ox-currency-edit :initial=\"value\" :saved=\"saved\"/>\n        </template>\n    </ox-model-panel>\n</template>\n<script setup lang=\"ts\">\nimport { computed, defineProps, inject, useSlots, withDefaults } from 'vue'\n\nimport { useModels, query, t } from '@oxylus/ox'\nimport {OxModelPanel} from '@oxylus/ox/components'\nimport type {IModelPanelProps} from '@oxylus/ox'\n\nimport {useLocationModels} from '../composables'\nimport OxCurrencyEdit from './OxCurrencyEdit.vue'\n\nconst slots = useSlots()\nconst forwardSlots = Object.keys(slots).filter(x => !(['list.filters', 'top'].includes(x)))\n\nconst repos = useLocationModels()\nquery(repos.currencies).allOnce()\n\nconst kanbanHeaders = computed(() => {\n    return [\n        {title: 'Without group', value: null},\n        ...groups.value.map((group) => ({title: group.name, value: group.id}))\n    ]\n})\n\nconst props = withDefaults(defineProps<IModelPanelProps>(), {\n    name: 'currencies',\n    headers: ['name', 'code', 'numeric', 'is_iso', 'valid_to'],\n})\n</script>\n","import {App} from '@oxylus/ox/components'\nimport * as components from './components'\n\nexport default {\n    extends: App,\n    components,\n}\n","import {init, createPinia} from '@oxylus/ox'\nimport App from './app'\n\nconst pinia = createPinia()\ninit({App, plugins: [pinia] })\n"],"names":["Currency","models","__publicField","Country","OFFSET","chars","c","useLocationModels","useModels","useCountries","countries","useCurrencies","currencies","slots","useSlots","attrs","useAttrs","value","_useModel","__props","repos","_openBlock","_createBlock","_unref","_mergeProps","$event","_createSlots","_withCtx","item","_createElementVNode","_hoisted_1","_toDisplayString","_createTextVNode","props","_createVNode","_component_v_list_item","_hoisted_2","_","slot","bind","_renderSlot","_ctx","_normalizeProps","_guardReactiveProps","query","rawIban","displayIban","ref","countryCode","computed","country","watch","val","old","raw","toRaw","display","toDisplay","_a","validateIban","cleaned","t","expanded","ch","_component_v_text_field","_createElementBlock","_component_v_icon","_hoisted_3","index","itemProps","_renderList","_component_v_select","editor","editable","_component_v_row","_component_v_col","OxField","OxContinentInput","OxCurrencyInput","forwardSlots","x","OxModelPanel","list","filters","saved","OxCountryEdit","name","OxModelEdit","group","_cache","OxCurrencyEdit","App","components","pinia","createPinia","init"],"mappings":"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"}