{"version":3,"file":"components.js","sources":["../src/components/OxAction.vue","../src/components/OxActionModelDelete.vue","../src/components/OxActionPost.vue","../src/components/OxAppNavItem.vue","../src/components/OxAppNav.vue","../src/components/OxApp.vue","../src/components/OxAutocomplete.vue","../src/components/OxComponent.vue","../src/components/OxField.vue","../src/components/OxModelList.vue","../src/components/OxListFilters.vue","../src/components/OxFormListItem.vue","../src/components/OxFormList.vue","../src/components/OxListKanban.vue","../src/components/OxActionEdit.vue","../src/components/OxListTable.vue","../src/components/OxListCard.vue","../src/components/OxStateAlert.vue","../src/components/OxValidationBtn.vue","../src/components/OxLogin.vue","../src/components/OxPanel.vue","../src/components/OxView.vue","../src/components/OxModelEditor.vue","../src/components/OxModelEdit.vue","../src/components/OxModelPanel.vue","../src/components/index.ts"],"sourcesContent":["<template>\n    <template v-if=\"allowed\">\n        <v-btn v-if=\"props.button\" variant=\"text\" v-bind=\"attrs\"\n            :disabled=\"processing\"\n            :color=\"props.color\" :icon=\"props.icon\"\n            :title=\"props.title\" :aria-label=\"props.title\"\n            @click.stop=\"run\">\n        </v-btn>\n        <v-list-item v-else v-bind=\"attrs\"\n            :title=\"props.title\" :base-color=\"props.color\" :prepend-icon=\"props.icon\"\n            :disabled=\"processing\"\n            @click.stop=\"run\"/>\n    </template>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component A button that aims to execute an action that can be related to\n * an item.\n *\n * It provides permissions checks and user confirmation. A function can be provided\n * as well as an URL. The action can be rendered as a `v-btn` or `v-list-item`.\n *\n * This is the base component used for most actions to execute in user interfaces.\n *\n * Required injections: `user`\n */\nimport {computed, defineProps, defineEmits, inject, useAttrs} from 'vue'\nimport {useAction} from '@oxylus/ox'\n\nimport type {IActionProps, ActionCompleted} from '../composables/actions'\n\nconst props = defineProps<IActionProps>()\nconst attrs = useAttrs()\n\nconst emits = defineEmits<{\n    /**\n     * Callback when an action has been completed.\n     *\n     * @param {User} user - user running the action.\n     * @param {Model|null} item - item on which the action was run.\n     * @param {any} result - result of the action (return value of the called function).\n     */\n    completed: ActionCompleted\n}>()\nconst user = inject('user')\nconst {run, processing, allowed} = useAction({user: user, emits, props})\n</script>\n","<template>\n    <ox-action v-bind=\"attrs\" :item=\"props.item\"\n        icon=\"mdi-delete\" color=\"error\"\n        :title=\"t('actions.delete')\" :confirm=\"t('actions.delete.confirm')\"\n        :permission=\"[props.item.constructor , 'delete']\"\n        :run=\"run\" @completed=\"panel?.show({view:panel.index})\"\n    />\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An action button used to delete the provided item.\n *\n * Required injections: `panel`, `repos` and `user`.\n *\n * Attributes bound to inner {@link OxAction}.\n */\nimport { defineProps, inject, useAttrs } from 'vue'\nimport { t } from '@oxylus/ox'\nimport type { Model } from '@oxylus/ox/models'\n\nimport OxAction from './OxAction.vue'\n\nconst panel = inject('panel')\nconst repos = inject('repos')\n\nconst attrs = useAttrs()\nconst props = defineProps<{\n    /** The object to delete. */\n    item: Model\n}>()\n\nasync function run(user, item) {\n    const repo = repos[item.constructor.entity]\n    return await repo.api().delete(item.$url(), {delete: props.item.id})\n}\n</script>\n","<template>\n    <ox-action v-bind=\"attrs\" :run=\"run\"/>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An action button used to make a POST request for the related\n * model item.\n *\n * Required injections: `user`.\n *\n * Attributes bound to inner {@link OxAction}.\n */\n/**\n * This action is used to make POST request for a specified model item.\n */\nimport { useAttrs } from \"vue\"\nimport OxAction from \"./OxAction\"\n\nconst attrs = useAttrs()\nconst props = defineProps({\n    /**\n     * URL path to append to item's url. Should be provided.\n     */\n    path: String,\n    /**\n     * HTTP method to use (upper or lower cased)\n     */\n    method: {type: String, default: 'post'},\n    /** Model repository to use */\n    repo: Object,\n    /** POST data to send (optional) */\n    data: Object,\n    /** Pinia-Orm AXIOS options */\n    options: Object,\n})\n\nasync function run(user, item) {\n    // For some reason directly call api()[props.method] does not pass down\n    // this argument.\n    const api = props.repo.api()\n    return await api[props.method.toLowerCase()].apply(api, [item.$url(props.path), props.data, props.options])\n}\n</script>\n","<template>\n    <template v-if=\"shouldShow(props)\">\n        <template v-if=\"props.type == 'group'\">\n            <v-list-group :value=\"props.name\">\n                <template #activator=\"{props:itemProps}\">\n                    <v-list-item v-bind=\"itemProps\"\n                        :title=\"props.title\" :prepend-icon=\"props.icon\" />\n                </template>\n\n                <template v-for=\"(sub, i) in props.items\" :key=\"i\">\n                    <ox-app-nav-item v-bind=\"sub\"\n                        :type=\"sub.type == 'group' ? 'subheader' : sub.type\" />\n                </template>\n            </v-list-group>\n        </template>\n        <template v-else-if=\"props.type == 'subheader'\">\n            <v-list-subheader>{{ props.title }}</v-list-subheader>\n            <template v-if=\"props.items\">\n                <ox-app-nav-item v-for=\"item of props.items\"\n                    v-bind=\"item\" />\n            </template>\n        </template>\n        <v-list-item v-else\n            :active=\"panels.panel == props.name\"\n            :value=\"props.name\"\n            :prepend-icon=\"props.icon\" :title=\"props.title\"\n            @click.stop=\"show\"/>\n    </template>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An navigation item used by {@link OxAppNav}.\n *\n * There are three type of items:\n * - `item`: a single simple item, represented by a `v-list-item`.\n * - `subheader`: a group of items with a `v-list-subheader` on the top.\n * - `group`: a group of items collapsable under a `v-list-group`.\n *\n * For `subheader` and `group`, it will used provided (nested) items.\n *\n * Note that those values are actually those provided by Django applications'\n * `panels` module.\n *\n *\n * Required injections: `user`, `panels`.\n */\nimport { computed, defineProps, inject, ref } from 'vue'\nimport type {IPanelInfo} from '../controllers'\n\nexport interface INavItemProps extends IPanelInfo {\n    /** Panel name */\n    name: string\n    /** Panels page **/\n    url?: string\n    /** Required permission */\n    permission?: string|string[]\n    /** Item type: subheader, divider, (item by default) */\n    type?: string,\n    /** Nested items */\n    items?: Record<string, INavItemProps>[]\n    // Unused but avoids warnings\n    order: number\n}\n\nconst props = defineProps<INavItemProps>()\n\nconst isOpen = ref(null)\nconst user = inject('user')\nconst panels = inject('panels')\nconst visible = computed(() => !props.auto || panel.name == props.name)\n\nfunction shouldShow(item) {\n    if(item.permission && !user.can(item.permission))\n        return false\n    if(item.items)\n        return item.items.some(x => shouldShow(x))\n    return true\n}\n\n\n/** Show this panel */\nfunction show() {\n    const vals = { panel: props.name, href: props.url }\n    panels.show(vals)\n}\n</script>\n","<template>\n    <v-navigation-drawer v-model=\"drawer\" theme=\"dark\">\n        <!-- @slot At the top of the list -->\n        <slot name=\"prepend\"/>\n        <v-list v-model:opened=\"opened\" density=\"compact\">\n            <template v-for=\"(item,i) in items\" :key=\"i\">\n                <ox-app-nav-item v-bind=\"item\"/>\n            </template>\n        </v-list>\n        <template #append>\n            <v-list>\n                <!-- @slot After the list (inside another `v-list`) -->\n                <slot name=\"append\"/>\n            </v-list>\n        </template>\n    </v-navigation-drawer>\n</template>\n<script setup>\n/**\n * @component A navigation sidebar using `v-navigation-drawer`, based on a\n * provided list of navigation items.\n *\n * Each item is provided as properties to an {@link OxAppNavItem}.\n *\n * Required injections: `panels`.\n */\nimport { computed, defineModel, inject, ref } from 'vue'\n\nimport OxAppNavItem from './OxAppNavItem.vue'\n\nconst panels = inject('panels')\n/** @model drawer - This controls wether the panel is opened or not. */\nconst drawer = defineModel('drawer')\nconst opened = ref([])\n\nconst props = defineProps({\n    /** The list of items */\n    items: Array\n})\n\nconst items = computed(() => {\n    updateOpened(props.items)\n    return props.items\n})\n\n/** Update opened items */\nfunction updateOpened(items) {\n    opened.value = getOpened(items)\n}\n\n/** Get opened menu items */\nfunction getOpened(items) {\n    if(panels.panel)\n        for(const item of items) {\n            if(item.items) {\n                const val = getOpened(item.items)\n                if(val)\n                    return [val, item.name]\n            }\n            else if(item.name == panels.panel)\n                return [item.name]\n        }\n}\n\n\n</script>\n","<template>\n    <v-app>\n        <v-snackbar v-model=\"context.showState\" :color=\"context.state.color\" multi-line>\n            {{ context.state.toString() }}\n        </v-snackbar>\n        <v-app-bar color=\"primary\">\n            <!-- @slot Prepend on app bar -->\n            <template v-slot:prepend>\n                <v-app-bar-nav-icon v-if=\"slots['nav-start'] || slots['nav-end']\" icon=\"mdi-apps\"\n                    :title=\"t('nav.panels')\" :aria-label=\"t('nav.panels')\"\n                    @click.stop=\"nav.drawer = !nav.drawer\"/>\n            </template>\n            <v-app-bar-title id=\"app-bar-sheet-title\"/>\n            <v-app-bar-title id=\"app-bar-title\">\n                <!-- @slot App bar bar title -->\n                <slot name=\"title\"/>\n            </v-app-bar-title>\n            <!-- @slot Left side of app bar -->\n            <slot name=\"app-bar-left\"></slot>\n            <div id=\"app-bar-right\" class=\"mr-3\"></div>\n            <!-- @slot Right side of app bar -->\n            <slot name=\"app-bar-right\"></slot>\n        </v-app-bar>\n        <ox-app-nav v-if=\"slots['nav-start'] || slots['nav-end']\" v-model:drawer=\"nav.drawer\" :items=\"context.data.nav\">\n            <template #prepend>\n                <a class=\"nav-home\" href=\"/\">\n                    <v-img v-if=\"logo\" :src=\"logo\" class=\"logo\"/>\n                </a>\n                <!-- @slot Top of navigation drawer -->\n                <slot name=\"nav-start\" :context=\"context\"></slot>\n            </template>\n            <template #append v-if=\"slots['nav-end']\">\n                <v-list v-model:opened=\"nav.opened\">\n                    <!-- @slot Bottom of navigation drawer -->\n                    <slot name=\"nav-end\" :context=\"context\"></slot>\n                </v-list>\n            </template>\n        </ox-app-nav>\n        <v-main>\n            <!-- @slot Inside `v-main` -->\n            <slot name=\"main\">\n                <v-tabs-window v-model=\"panels.panel\">\n                    <template #default=\"bind\">\n                        <!-- @slot Inside `v-tabs-window` -->\n                        <slot name=\"default\" v-bind=\"bind\" :context=\"context\"></slot>\n\n                        <v-tabs-window-item v-for=\"(name, slot) in panelsSlots\" :key=\"slot\" :value=\"name\">\n                            <!-- @slot Each slot declared with prefix `panels.` will be put in a `v-tabs-window-item`. -->\n                            <slot :name=\"slot\" v-bind=\"bind\" :context=\"context\"/>\n                        </v-tabs-window-item>\n                    </template>\n                </v-tabs-window>\n            </slot>\n        </v-main>\n    </v-app>\n</template>\n<style>\n.nav-home {\n    display: block;\n    text-align: left;\n}\n.nav-home .logo {\n    max-height: 4em;\n    margin: 1em 1em 0.4em 1em;\n}\n</style>\n<script setup lang=\"ts\">\n/**\n * @component Application component, handling navigation and page layout.\n *\n * This is the main component loading application data and context, while\n * providing the page layout.\n *\n * Provide: `context`, `user`.\n *\n * ## Application layout\n *\n * **App bar**: bar at the top of the page, using `v-app-bar` and friends;\n *\n * **Sidebar**: uses {@link OxAppNav}\n *\n * **Main**: a `v-main` which has by default a `v-tabs-window` in which each panel\n * will be put. To add a panel, use template prefix `panels.`\n *\n * ```xml\n * <ox-app>\n *     <template #panels.custom=\"{}\">\n *         <!-- my-custom-panel -->\n *     </template>\n * </ox-app>\n *\n * ```\n */\n\nimport { useSlots, withDefaults, onErrorCaptured, onMounted } from 'vue'\nimport { computed, defineProps, inject, provide, reactive, watch } from 'vue'\n\nimport {useAppContext, usePanels, t, filterSlots} from '@oxylus/ox'\nimport type {Model} from '../models'\nimport OxAppNav from './OxAppNav.vue'\n\nconst slots = useSlots()\nconst panelsSlots = filterSlots(slots, \"panels.\")\n\ninterface Props {\n    /** Base url for API **/\n    apiUrl?: string\n    /** Sidebar logo **/\n    logo?: string\n    dataEl?: string\n    models?: Model[]\n    /** Data to load **/\n    data?: object\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n    dataEl: document.body.dataset?.appData\n})\n\nconst nav = reactive({drawer: true})\n\nconst context = useAppContext(props)\nconst panels = usePanels()\n\nonMounted(() => { panels.panel = context.data.panel })\n\nwatch(() => [context.state.state, context.state.data], () => {\n    context.showState = true\n})\n\nonErrorCaptured((err, instance, info) => {\n    context.state.error(`${err}`)\n})\n</script>\n","<template>\n    <input type=\"hidden\" v-if=\"props.name\" :name=\"props.name\" :value=\"value\"/>\n    <v-autocomplete v-bind=\"attrs\"\n        :items=\"items\" :loading=\"state.isProcessing\"\n        v-model=\"value\"\n        v-model:search=\"search\"\n        >\n        <template #item=\"slotProps\">\n            <slot name=\"item\" v-bind=\"slotProps\" />\n        </template>\n\n        <template #selection=\"slotProps\">\n            <slot name=\"selection\" v-bind=\"slotProps\" />\n        </template>\n\n        <template v-for=\"_, slot in slots\" #[slot]=\"bind\">\n            <!-- @slot All slots are passed down to `v-autocomplete`. -->\n            <slot :name=\"slot\" v-bind=\"bind\"/>\n        </template>\n    </v-autocomplete>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component Autocompletion field, fetching model's data from the provided server.\n *\n * It is a wrapper around `v-autocomplete` which items are model instance.\n * It also has an hidden `<input>` field which allows it to be used with forms.\n *\n * Items are not saved on the repository in order to keep it clean and avoid to flood\n * memory.\n */\nimport { debounce, unionBy } from 'lodash'\n\nimport type { Reactive, Ref } from 'vue'\nimport { defineExpose, defineModel, inject, reactive, ref, onMounted, useAttrs, useSlots, watch } from 'vue'\nimport type {Repository} from 'pinia-orm'\nimport { VAutocomplete } from 'vuetify/components/VAutocomplete'\n\nimport { useQuery, ifNotEqualFn } from '@oxylus/ox'\nimport type {IModelList, State} from '@oxylus/ox'\nimport type {Model, ModelId} from '@oxylus/ox/models'\n\nconst slots = useSlots()\n\n/** Model value **/\nconst value: Ref<ModelId|ModelId[]> = defineModel()\n/** Search string **/\nconst search: Ref<string> = ref(\"\")\n\n\ninterface IAutoCompleteProps {\n    /** Model's repository */\n    repo: Repository\n    /** GET parameter for passing the search lookup. */\n    lookup: string\n    /** Field name */\n    name: string\n    /** Search filters */\n    filters: Object\n}\n\n\nconst props = withDefaults(defineProps<IAutoCompleteProps>(), {\n    lookup: 'search',\n})\nconst attrs = useAttrs()\nconst repos = inject('repos')\n\n// list props are not expected to change, only `filters`\nconst {state, query, fetch} = useQuery(props.repo, repos, {save: false})\n\n/** List of items **/\nconst items: Reactive<Model[]> = reactive([])\n/** Selected items **/\nconst selected: Ref<Model[]> = ref([])\n\n\n/** Get items by id, fetching missing ones */\nasync function getItems(ids: ModelId|ModelId[]) {\n    const missingIds = ids && getMissing(ids)\n    if(missingIds?.length) {\n        const resp = await fetch({id: missingIds})\n        items.splice(0, 0, ...resp.entities)\n    }\n\n    updateSelected(ids)\n}\n\n/** From the provided list of ids, returns thoses not present in the list */\nfunction getMissing(ids: ModelId|ModelId[]): ModelId[]|null {\n    if(!Array.isArray(ids))\n        return items.findIndex((v) => v.id == ids) == -1 ? [ids] : null\n\n    const itemIds = new Set(items.map(item => item.id))\n    return ids.filter(id => !itemIds.has(id))\n}\n\n/** Update selection based on provided list of items. */\nfunction updateSelected(ids: ModelId|ModelId[]) {\n    if(Array.isArray(ids))\n        selected.value = items.filter(v => ids.includes(v.id))\n    else if(ids)\n        selected.value = [items.find(v => v.id == ids)]\n    else\n        selected.value = []\n}\n\n\nlet lastSearch = null\n\n/**\n * Load the list of items from the server based on search value.\n * Avoids to reload if the search is the same a the previous one.\n *\n * @param {boolean} reset - force loading event despite search did not changed.\n */\nconst load = debounce(async ({reset=false}={}) => {\n    // Using debounce is tricky: it delays calling function\n    // This means:\n    // - we need to fetch the actual search value when function is run\n    // - we are delayed between search/filters update\n    //\n    // - we provides reset to:\n    //   - force loading even if search is the same as last one\n    //   - reset search (v-autocomplete resets search.value when items is updated.\n    if(state.isProcessing)\n        return\n\n    const q = search.value != '<empty string>' && search.value || ''\n    if(!reset && q == lastSearch)\n        return\n    lastSearch = q\n\n    const filters = {...props.filters, page_size: 20}\n    filters[props.lookup] = q\n    let resp = await fetch({params: filters})\n\n    const entities = selected.value ?\n        unionBy(resp.entities, selected.value, (v) => v.id) :\n        resp.entities\n\n    items.splice(0, items.length, ...entities)\n\n    if(!reset) {\n        // When item is not provided we ensure it is here\n        // value.value && await getItems(value.value)\n        search.value = q\n    }\n}, 500)\n\n\n\n// --- Watchers\nonMounted(async () => {\n    await load()\n    value.value && await getItems(value.value)\n})\n\nwatch(() => props.filters, ifNotEqualFn(() => load({reset: true})))\nwatch(search, val => {\n    // v-autocomplete set search to \"<empty string>\"\n    // when items are updated, search is reset\n    if(val != '<empty string>' && val != lastSearch)\n        load({q: val})\n})\nwatch(value, (val, old) => {\n    val != old && updateSelected(val)\n})\n\n\ndefineExpose({\n    /** Selected models ids. */\n    value,\n    /** Selected items. */\n    selected,\n    /** Load list of items. */\n    load,\n    /** All fetched items (displayed in the selection list). */\n    items\n})\n</script>\n","<script>\nimport { h, computed, shallowRef, watch } from 'vue'\nimport { defineAsyncComponent } from '@oxylus/ox'\n\n/**\n * A component fetched from remote server.\n *\n * The component to fetch shall be compiled as a separate javascript module.\n * It kinda similar to Vue's `defineAsyncComponent`, but using an url string to\n * the module file instead. It will also try to fetch css based on the file name.\n *\n * All attributes will be forwarded to loaded component.\n *\n * Example usage:\n *\n * ```xml\n * <!-- Url can be relative to the generated module file. -->\n * <ox-component src=\"../content/OxRichEditor.js\" v-bind=\"props\"\n *     height=\"150px\"\n *     v-model=\"editor.value.mail_subscription_footer\"/>\n * ```\n */\nexport default {\n    props: {\n        /** Component url. */\n        src: String,\n        /** Component name. If not provided, use file name. */\n        is: String,\n    },\n\n    setup(props) {\n        const component = shallowRef(null)\n\n        const is = computed(() => {\n            if(props.is)\n                return props.is\n\n            let name = props.src.substring(props.src.lastIndexOf('/')+1)\n            if(name)\n                name = name.substring(0, name.indexOf('.'))\n            if(!name)\n                throw Error(\n                    \"`is` not provided and could not be deducted from `src`.\"\n                )\n            return name\n        })\n\n        function reset() {\n            component.value = defineAsyncComponent(props.src, is.value)\n        }\n\n        watch(() => props.src, reset)\n\n        reset()\n        return () => h(component.value, props)\n    },\n}\n</script>\n","<template>\n    <!-- @slot default slot providing all values for custom field.\n        @binding {String} props field props as used by Vuetify\n        @binding {ModelEditor} editor the editor\n        -->\n    <slot name=\"default\" :props=\"fieldProps\" :editor=\"props.editor\">\n        <template v-if=\"props.type == 'select'\">\n            <v-select v-bind=\"fieldProps\"\n                v-model=\"props.editor.value[props.name]\"/>\n        </template>\n        <template v-else-if=\"props.type == 'textarea'\">\n            <v-textarea v-bind=\"fieldProps\"\n                v-model=\"props.editor.value[props.name]\"/>\n        </template>\n        <template v-else-if=\"props.type == 'checkbox'\">\n            <v-checkbox v-bind=\"fieldProps\"\n                v-model=\"props.editor.value[props.name]\"/>\n        </template>\n        <template v-else-if=\"props.type == 'autocomplete'\">\n            <ox-autocomplete v-bind=\"fieldProps\"\n                v-model=\"props.editor.value[props.name]\">\n                <template v-for=\"_, name in slots\" :key=\"slot\"\n                    #[name]=\"bind\">\n                    <!--\n                        @slot Slots are passed down to the inner component. Currently it is only supported for the `ox-autocomplete` component.\n                    -->\n                    <slot :name=\"name\" v-bind=\"bind\"/>\n                </template>\n            </ox-autocomplete>\n        </template>\n        <template v-else>\n            <v-text-field v-bind=\"fieldProps\" :type=\"props.type\"\n                v-model=\"props.editor.value[props.name]\"/>\n        </template>\n    </slot>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component A simple wrapper around form input in order to ease integration\n * with {@link Editor} and translation.\n *\n * Based on the `type` attribute, a difference component can be used.\n *\n * Supported types:\n * - `textarea`: creates a `v-textarea`;\n * - `select`: creates a `v-select`;\n * - `checkbox`: create a `v-checkbox`;\n * - `date`: create a `v-date-input`;\n * - `autocomplete`: create a `ox-autocomplete`;\n * - any other value: `v-text-field` with supplied type;\n *\n * Attributes are bounded to the inner component.\n */\n\nimport {computed, defineEmits, defineAsyncComponent, useAttrs, useSlots} from 'vue'\nimport {t, rules} from '@oxylus/ox'\n\nconst OxAutocomplete = defineAsyncComponent(() => import('./OxAutocomplete.vue'))\n\nconst emits = defineEmits([\n    /** Value has changed */\n    'update:modelValue'\n])\nconst attrs = useAttrs()\nconst slots = useSlots()\nconst props = defineProps({\n    /** Field or attribute name */\n    name: String,\n    /** Editor to use **/\n    editor: Object,\n    /** If true, add a required rule */\n    required: Boolean,\n    /** Field type */\n    type: String,\n    /** Field rules as provided to Vuetify field inputs. */\n    rules: Array\n})\n\nconst fieldProps = computed(() => {\n    const helpKey = `fields.${props.name}.help`\n    const obj = {\n        \"name\": props.name,\n        \"label\": t(`fields.${props.name}`),\n        \"aria-label\": t(`fields.${props.name}`),\n        \"error-messages\": props.editor.error(props.name),\n        \"rules\": props.rules || [],\n        \"onUpdate:modelValue\": (...args) => emits('update:modelValue', ...args),\n        ...attrs\n    }\n\n    const helpText = t(helpKey)\n    if(helpText != helpKey) {\n        obj[\"hint\"] = helpText\n        obj[\"aria-description\"] = helpText\n    }\n\n    if(props.required)\n        obj['rules'].push(rules.required)\n    return obj\n})\n\n</script>\n","<template>\n    <!--\n        @slot Wrap around the `v-list`.\n        @binding {ModelList} list the ModelList instance\n        @binding {Model[]} items the items of the ModelList\n    -->\n    <slot name=\"default\" :list=\"list\" :items=\"items\">\n        <v-list v-bind=\"attrs\">\n            <!--\n                @slot Default slot inside `v-list`\n                @binding {ModelList} list the ModelList instance\n                @binding {Model[]} items the items of the ModelList\n            -->\n            <slot name=\"list\" :list=\"list\" :items=\"items\">\n                <v-list-item v-for=\"item in items\" :key=\"item.id\">\n                    <!--\n                        @slot Default slot inside `v-list-item`\n                        @binding {Object} item the item being rendered.\n                        @binding {Object} list the ModelList instance.\n                    -->\n                    <slot name=\"item\" :list=\"list\" :item=\"item\"/>\n\n                    <template #append>\n                        <!--\n                            @slot Extra actions inside `v-list-item`.\n                            @binding {Object} item the item being rendered.\n                            @binding {Object} list the ModelList instance.\n                        -->\n                        <slot name=\"item.actions\" :list=\"list\" :item=\"item\" />\n                        <v-btn v-if=\"props.editable\"\n                            type=\"button\" class=\"ml-2\" size=\"small\" color=\"error\"\n                            @click.stop.prevent=\"remove(item.id)\"\n                            :aria-label=\"t('actions.remove')\"\n                            :title=\"t('actions.remove')\"\n                            icon=\"mdi-delete\"/>\n                    </template>\n                </v-list-item>\n            </slot>\n        </v-list>\n    </slot>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component Renders a list of items provided by id using a {@link ModelList}.\n *\n * The default implementation renders a `v-list`.\n *\n * When the list is editable, a remove button is displayed.\n */\nimport { defineModel, defineExpose, onMounted, watch, useSlots, useAttrs } from 'vue'\nimport { useModelList, Query, t, ifNotEqual } from '@oxylus/ox'\n\n/**\n * @model The list of ids to fetch.\n */\nconst ids = defineModel()\nconst slots = useSlots()\n\nconst props = defineProps({\n    /**\n     * The model repository to use.\n     */\n    repo: Object,\n    /**\n     * Allow to remove items from the list.\n     */\n    editable: Boolean,\n})\nconst attrs = useAttrs()\n\nconst {list, items} = useModelList({\n    query: new Query(props.repo)\n})\n\n\nfunction remove(id) {\n    // for some reason, watch isn't triggered on remove\n    list.remove(id)\n    ids.value = [...list.ids]\n}\n\n\nonMounted(() => ids.value.length && list.load({id: ids.value}))\nwatch(ids, (val) => val.length && ifNotEqual(val, list.ids, (val) => val.length && list.load({id: val})))\nwatch(() => list.ids, (val) => (ids.value = [...val]))\n\ndefineExpose({\n    /** The used {@link ModelList} controller. */\n    list,\n    /** The actual list of items. */\n    items\n})\n</script>\n","<template>\n    <form @submit.prevent=\"list.load()\" class=\"ox-list-filters width-full\">\n        <v-toolbar dense color=\"transparent\">\n            <v-app-bar-nav-icon :icon=\"icon\" readonly/>\n            <v-text-field v-if=\"props.search && list.filters\"\n                :label=\"t('filters.search')\" density=\"compact\" class=\"ml-2\"\n                v-model=\"list.filters[props.search]\"\n                hide-details/>\n            <!-- @slot Filters objects inside a `<form>` tag\n                 @binding {ModelList} list the model list controller\n                 @binding {Object} filters the actual filters (as list filters, an object with key-value parameters -->\n            <slot :list=\"list\" :filters=\"list.filters\"/>\n            <v-btn @click.stop=\"list.load()\" class=\"ml-2\" icon=\"mdi-check\"\n                :aria-label=\"$t('filters.apply')\"\n                :title=\"t('filters.apply')\"\n            />\n            <v-btn v-if=\"hasFilters\" @click.stop=\"reset\" icon=\"mdi-backspace\"\n                :aria-label=\"t('filters.reset')\"\n                :title=\"t('filters.reset')\"\n            />\n        </v-toolbar>\n    </form>\n</template>\n<script setup>\n/**\n * @component A form filled with filters for list views (see {@link OxModelPanel}).\n *\n * You might want to add for `hide-details` on the nested input fields.\n *\n * Required injections: `list`\n */\n// TODO: pass list as props.\nimport { computed, defineProps, defineExpose, inject } from 'vue'\nimport { t } from '@oxylus/ox'\n\nconst list = inject('list')\nconst props = defineProps({\n    /** Search GET parameter. If provided, display search field. */\n    search: String,\n})\n\nconst hasFilters = computed(() => {\n    const filters = list.filters\n    return filters && Object.entries(filters).some(\n        ([k,v]) => !k.startsWith('page') && !k.startsWith('ordering') && !!v\n    )\n})\nconst icon = computed(() => hasFilters.value ? 'mdi-filter-check' : 'mdi-filter-outline')\n\nfunction reset() {\n    list.filters = {}\n    list.load()\n}\n\ndefineExpose({\n    // FIXME: remove icon ?\n    /** Current computed icon */\n    icon,\n    /** Computed value indicating whether there are filters */\n    hasFilters,\n    /** Reset filters function. */\n    reset\n})\n</script>\n","<template>\n    <v-list-item v-bind=\"attrs\">\n        <v-list-item-title>\n            <!--\n                @slot Item title\n                @binding {Object} item - item currently displayed\n            -->\n            <slot name=\"default\" :item=\"item\"/>\n        </v-list-item-title>\n        <template #append>\n            <div @click.stop=\"\">\n                <!--\n                    @slot Item action\n                    @binding {Object} item - item currently displayed\n                -->\n                <slot name=\"actions\" :item=\"item\"/>\n                <template v-if=\"props.remove\">\n                    <v-btn type=\"button\" class=\"ml-2\" size=\"small\"\n                        @click.stop.prevent=\"emits('remove', $events)\" color=\"error\"\n                        :aria-label=\"t('actions.remove')\"\n                        :title=\"t('actions.remove')\"\n                        icon=\"mdi-delete\"/>\n                </template>\n            </div>\n        </template>\n    </v-list-item>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An element inside an {@link OxFormList}.\n *\n * Attributes are bounded to inner `v-list-item`.\n */\nimport { defineModel, defineEmits, useAttrs } from 'vue'\nimport { t } from '@oxylus/ox'\n\nconst props = defineProps<{\n    /** Item being displayed. **/\n    item: object,\n    /** Display remove button. **/\n    remove: boolean,\n}>()\nconst emits = defineEmits([\n    /**\n     * Remove item button has been clicked. The click event data is passed along.\n     */\n    'remove'\n])\n\nconst attrs = useAttrs()\n</script>\n","<template>\n    <v-list v-model:opened=\"opened\">\n        <template v-if=\"items?.length\">\n            <template v-if=\"can.change\">\n                 <v-list-group v-for=\"item, index in items\" :key=\"index\" :value=\"index\">\n                    <template #activator=\"{props}\">\n                        <ox-form-list-item :item=\"item\" v-bind=\"props\"\n                                :remove=\"can.delete\"\n                                @remove=\"removeItem(index)\">\n                            <template #default=\"{item}\">\n                                <slot name=\"item\" :item=\"item\" :index=\"index\"/>\n                            </template>\n                            <template #actions=\"{item}\">\n                                <slot name=\"item.actions\" :item=\"item\" :index=\"index\"/>\n                            </template>\n                        </ox-form-list-item>\n                    </template>\n                    <v-form :disabled=\"!can.change\">\n                        <slot name=\"item.form\" :item=\"item\" :index=\"index\" :editable=\"can.change\"/>\n                    </v-form>\n                </v-list-group>\n            </template>\n            <template v-else>\n                <template v-for=\"item, index in items\" :key=\"index\">\n                    <ox-form-list-item :item=\"item\" v-bind=\"props\"\n                            :value=\"index\"\n                            :remove=\"can.delete\"\n                            @remove=\"removeItem(index)\">\n                        <template #default=\"{item}\">\n                            <!--\n                                @slot Item's content.\n                                     @binding {object} item item being displayed\n                                     @binding {number} index item's index.\n                             -->\n                            <slot name=\"item\" :item=\"item\" :index=\"index\"/>\n                        </template>\n                        <template #actions=\"{item}\">\n                            <!-- @slot Item' actions content.\n                                 @binding {object} item item being displayed\n                                 @binding {number} index item's index. -->\n                            <slot name=\"item.actions\" :item=\"item\" :index=\"index\"/>\n                        </template>\n                    </ox-form-list-item>\n                </template>\n            </template>\n        </template>\n        <template v-else>\n            <v-list-item :title=\"t('lists.empty')\" />\n        </template>\n        <template v-if=\"can.add\">\n            <v-divider v-if=\"items.length\"/>\n            <v-list-group :value=\"-1\">\n                <template #activator=\"{props}\">\n                    <v-list-item v-bind=\"props\" :title=\"t('actions.add_item')\" prepend-icon=\"mdi-plus\"/>\n                </template>\n                <v-form>\n                    <!-- @slot Item' edit and add form.\n                         @binding {object} item item being edited\n                         @binding {number} index item's index.\n                         @binding {boolean} editable true if content is editable. -->\n                    <slot name=\"item.form\" :item=\"newItem\" :edit=\"true\"/>\n                </v-form>\n                <v-list-item v-if=\"newItem\">\n                    <div v-if=\"Object.values(newItem).length\"\n                            class=\"flex-row justify-right\">\n                        <v-btn size=\"small\" color=\"secondary\" prepend-icon=\"mdi-backspace\"\n                            @click=\"newItem={}\"\n                            :aria-label=\"t('actions.discard')\">\n                            {{ t('actions.discard') }}\n                        </v-btn>\n                        <v-btn  size=\"small\" color=\"primary\" prepend-icon=\"mdi-plus\" class=\"ml-2\"\n                            @click=\"addItem()\"\n                            :aria-label=\"t('actions.add')\">\n                            {{ t('actions.add') }}\n                        </v-btn>\n                    </div>\n                </v-list-item>\n            </v-list-group>\n        </template>\n    </v-list>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An editable list of items.\n *\n * It wraps around `v-list` and uses {@link OxFormListItem} as items of the list.\n *\n * In a nutshell:\n * - list can be edited (remove/add item)\n * - items can be edited in place (a form is expanded);\n * - extra actions can be added on the list;\n * - add/change/delete actions will be checked agains't user permissions;\n *\n * Example of a custom form list:\n *\n * ![OxFormList Screenshot](../../../../statics/OxFormList.png)\n */\nimport {computed, defineModel, defineProps, inject, ref, reactive, provide, toRefs} from \"vue\"\nimport {t} from \"@oxylus/ox\"\n\nimport OxFormListItem from './OxFormListItem.vue'\n\n/** @model the list of items. **/\nconst items = defineModel()\nconst user = inject('user')\nconst newItem = ref({})\nconst props = defineProps<{\n    /** Model class Use this model class **/\n    useModel: Function,\n    /** Content is editable **/\n    editable: boolean,\n}>()\n\nconst can = computed(() => ({\n    add: props.editable && user.can([props.useModel, 'add']),\n    change: props.editable && user.can([props.useModel, 'change']),\n    delete: props.editable && user.can([props.useModel, 'delete']),\n}))\n\nconst opened = ref([]);\n\nif(!items.value?.length)\n    opened.value.push(-1)\n\nfunction addItem() {\n    items.value.push(newItem.value)\n    newItem.value = {}\n}\n\nfunction removeItem(index) {\n    if(confirm(t('actions.delete.confirm')))\n        items.value.splice(index, 1)\n}\n</script>\n","<template>\n    <v-sheet>\n    <v-slide-group>\n        <v-slide-group-item v-for=\"(header, idx) in props.headers\" :key=\"header.value\"\n            v-slot=\"{selectedClass}\">\n            <v-card width=\"400\" :class=\"['ma-3', selectedClass]\"\n                    :color=\"color(idx)\" lines=\"two\">\n                <v-card-title>{{ header.title }}</v-card-title>\n                <v-list :bg-color=\"color(idx)\">\n                    <template v-if=\"sorted && sorted[header.value]\">\n                        <template v-for=\"item in sorted[header.value]\" :key=\"item.id\">\n                            <slot name=\"item\" :header=\"header\" :item=\"item\">\n                                <v-list-item :title=\"item[props.itemTitle]\"\n                                        :value=\"props.itemValue && item[props.itemValue]\"\n                                        @click=\"emits('click', item)\">\n                                    <template #append>\n                                        <slot name=\"item.action\"></slot>\n                                    </template>\n                                </v-list-item>\n                            </slot>\n                        </template>\n                    </template>\n                </v-list>\n            </v-card>\n        </v-slide-group-item>\n    </v-slide-group>\n    </v-sheet>\n</template>\n<script setup>\n/**\n * @component Provide a kanban list, with API * similar to {@link OxListTable}.\n *\n */\nimport { computed, defineEmits, defineProps, inject } from 'vue'\n\nconst emits = defineEmits(['click'])\nconst list = inject('list')\nconst items = inject('items')\n\nconst props = defineProps({\n    itemTitle: String,\n    itemValue: String,\n    field: String,\n    headers: Array,\n    colors: {type: Array, default: () => [\n        'purple', 'blue', 'teal', 'lime', 'orange', 'blue-gray',\n        'pink', 'indigo', 'cyan', 'light-green', 'amber', 'brown',\n        'red', 'deep-purple', 'light-blue', 'green', 'yellow', 'deep-orange'\n    ]},\n    colorVariant: {type: String, default: 'lighten-2'},\n})\n\n\nfunction color(idx) {\n    idx = idx % props.colors.length\n    if(props.colorVariant)\n        return props.colors[idx] + '-' + props.colorVariant\n    return props.colors[idx]\n}\n\n\nfunction assign(result, item, val) {\n    if(result[val])\n        !result[val].includes(item) && result[val].push(item)\n    else\n        result[val] = [item]\n}\n\nconst sorted = computed(() => {\n    const result = {}\n    if(items.value)\n        for(var item of items.value) {\n            const vals = item[props.field]\n            if(Array.isArray(vals)) {\n                if(vals.length)\n                    for(var val of vals)\n                        assign(result, item, val)\n                else\n                    assign(result, item, null)\n            }\n            else\n                assign(result, item, vals)\n        }\n    return result\n})\n</script>\n","<template>\n    <ox-action v-if=\"props.edit && user.can([item.constructor, 'change'], item)\"\n        v-bind=\"attrs\" icon=\"mdi-pencil\"\n        :title=\"t('actions.edit')\"\n        :item=\"item\"\n        :run=\"show\"/>\n    <ox-action v-else-if=\"props.edit && user.can([item.constructor, 'view'], item)\"\n        v-bind=\"attrs\" icon=\"mdi-eye-outline\"\n        :title=\"t('actions.view')\"\n        :item=\"item\"\n        :run=\"show\"/>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component An action button to view or edit the related\n * item, depending on the user's permissions. It uses `detail.edit` by default.\n *\n * Required injections: `panel`, `repos` and `user`.\n *\n * Attributes bound to inner {@link OxAction}.\n */\nimport { defineProps, inject, useAttrs, withDefaults } from 'vue'\nimport { t } from '@oxylus/ox'\nimport type { Model } from '@oxylus/ox/models'\n\nimport OxAction from './OxAction.vue'\n\nconst panel = inject('panel')\nconst repos = inject('repos')\nconst user = inject('user')\n\nconst attrs = useAttrs()\nconst props = withDefaults(defineProps<{\n    /**\n     * The related model instance to edit/view.\n     */\n    item: Model\n    /**\n     * Show edit button if user has permissions.\n     */\n    edit: boolean\n    /**\n     * View to display\n     */\n    view: string\n}>(), { view: \"detail.edit\" })\n\nfunction show(user, item) {\n    panel.show({view: props.view, value: item})\n}\n</script>\n","<template>\n    <v-data-table-server\n            :items=\"props.items\" item-index=\"id\"\n            :items-length=\"props.list.count || props.items.length\"\n            :items-per-page=\"props.list.page_size\"\n            :hide-default-footer=\"(props.list.count || props.items.length || 0) < props.list.page_size\"\n            :loading=\"props.list.state?.isProcessing\"\n            :headers=\"headers\"\n            :no-data-text=\"t('lists.empty')\"\n            class=\"align-top-table\"\n            @update:options=\"updateOptions\">\n        <template v-if=\"slots['item.image']\" #item.image=\"{item}\">\n            <!-- @slot If provided, use this as preview of the item. Defaults to an `v-img` with source set to `props.image`.\n                 @binding {Model} item current item -->\n            <slot name=\"item.image\" :item=\"item\">\n                <v-img v-if=\"item[props.image]\" :src=\"item[props.image]\" class=\"preview\" cover max-height=\"200\"/>\n            </slot>\n        </template>\n\n        <template v-for=\"(_, name) in itemSlots\" :key=\"name\" v-slot:[name]=\"bind\">\n            <!-- @slot Slots prefixed with `item.` are passed down to inner `v-data-table-server`.\n                 @binding {Model} item current item\n                -->\n            <slot :name=\"name\" v-bind=\"bind\"/>\n        </template>\n\n        <template #item.actions=\"{item}\">\n            <ox-action-edit button :item=\"item\" :edit=\"props.edit\"/>\n            <!-- @slot Action column of a row. It can be used to add extra actions to the list.\n                 @binding {Model} item the item we're talking about.\n                 @binding {=true} dense used for {@link OxAction}.\n                 @binding {=true} button used for {@link OxAction}.\n                 -->\n            <slot name=\"item.actions\" :item=\"item\" :dense=\"true\" :button=\"true\"/>\n        </template>\n    </v-data-table-server>\n</template>\n<style>\n.align-top-table td {\n  /*vertical-align: top;*/\n}\n</style>\n<script setup lang=\"ts\">\n/**\n * @component Provide a wrapper around `v-data-table` that is used to display {@link ModelList}.\n *\n * It takes a list of items managed by a {@link ModelList} as properties. The ModelList is used\n * to update/fetch items (eg. pagination).\n *\n * It also adds an extra column for actions with preset ones (view/edit).\n *\n * ## Columns\n *\n * Columns are described using the `headers` property. This property follows the format of\n * `v-data-table-server` with extra features. A column can be specified as:\n *\n * - a string: this is the field name of an item. In such case, the component looks up for\n *   a translation (following Oxylus conventions).\n * - an object as `{key: \"fieldName\", title: \"Column Title\"}`\n *\n * A column can be customized using a slot with the name of the field prefixed with `item.`, such\n * as `item.myField`.\n */\n\nimport { computed, defineProps, ref, toRefs, useSlots } from 'vue'\n\nimport { t, tKeys } from '@oxylus/ox'\n// import { Permissions } from '../models'\nimport { filterSlots } from '../utils'\nimport OxAction from './OxAction.vue'\nimport OxActionEdit from './OxActionEdit.vue'\n\nconst slots = useSlots()\nconst itemSlots = filterSlots(slots, 'item.', {exclude: ['item.actions', 'item.image']})\n\nconst props = defineProps({\n    /** ModelList used to display objects */\n    list: Object,\n    /** List items (cf. {@link useModelList}) */\n    items: Array,\n    /** Table headers */\n    headers: Array,\n    /** If True, display edit/view button */\n    edit: Boolean,\n    /** If provided, use this item field as image */\n    image: String,\n})\n\nconst headers = computed(() => {\n    const items = [];\n    if(props.image || slots['item.image'])\n        items.push({'key': 'image', title:''})\n\n    return items.concat(\n        props.headers.reduce((dst, field) => {\n            dst.push(\n                (typeof(field) == 'string') ?\n                {key: field, title: t(tKeys.field(field))} :\n                {key: field.key, title: t(field.title) }\n            )\n            return dst\n        }, [])\n    )\n})\n\nfunction updateOptions(event) {\n    const params = {\n        ...props.list.filters,\n        page: event.page,\n        page_size: event.itemsPerPage,\n        ordering: event.sortBy.map(({key, order}) => order == 'asc' ? key : `-${key}`)\n    }\n    props.list.page_size = event.itemsPerPage\n    props.list.load({params})\n}\n\n</script>\n","<template>\n    <v-container class=\"card-grid\">\n        <template v-for=\"item in props.items\" :key=\"item.id\">\n            <v-card density=\"compact\"\n                :title=\"headers[0].key && item[headers[0].key]\" :subtitle=\"headers[1]?.key && item[headers[1].key]\">\n\n                <template #title v-if=\"slots[headers[0].slot]\">\n                    <!-- @slot the first header will be provided as the card title.\n                         @binding {Model} item current item. -->\n                    <slot :name=\"headers[0].slot\" :item=\"item\"/>\n                </template>\n\n                <template #subtitle v-if=\"slots[headers[1]?.slot]\">\n                    <!-- @slot the second header will be provided as the card subtitle.\n                         @binding {Model} item current item. -->\n                    <slot :name=\"headers[1].slot\" :item=\"item\"/>\n                </template>\n\n                <div class=\"d-flex flex-no-wrap justify-space-between\">\n                    <div v-if=\"slots['item.image'] || props.image\">\n                        <v-avatar rounded=\"0\" size=\"125\">\n                            <!-- @slot If provided, use this as preview of the item. Defaults to an `v-img` with source set to `props.image`.\n                                 @binding {Model} item current item. -->\n                            <slot name=\"item.image\" :item=\"item\">\n                                <v-img :src=\"props.image\"/>\n                            </slot>\n                        </v-avatar>\n                    </div>\n                    <div>\n                        <v-card-item v-if=\"!slots['item.default'] && (headers.length > 2 || itemSlots.length)\">\n                            <div>\n                                <template v-for=\"header in headers\">\n                                    <div v-if=\"!notHeaders.has(header.key)\">\n                                        <v-label :text=\"header.title + ':'\" class=\"mr-2\"/>\n                                        <!-- @slot Each header will be slotted.\n                                             @binding {Model} item current item. -->\n                                        <slot :name=\"header.slot\" :item=\"item\">\n                                            <template v-if=\"!isEmpty(item[header.key])\">\n                                                {{ item[header.key] }}\n                                            </template>\n                                        </slot>\n                                    </div>\n                                </template>\n                            </div>\n                        </v-card-item>\n\n                        <v-card-actions>\n                            <ox-action-edit button :item=\"item\" :edit=\"props.edit\" size=\"small\"/>\n                            <!-- @slot Action column of a row. It can be used to add extra actions to the list.\n                                 @binding {Model} item the item we're talking about.\n                                 @binding {=true} dense used for {@link OxAction}.\n                                 @binding {=true} button used for {@link OxAction}.\n                                 @binding {=\"small\"} size used for {@link OxAction}.\n                                 -->\n                            <slot name=\"item.actions\" :item=\"item\" :button=\"true\" size=\"small\"/>\n                        </v-card-actions>\n                    </div>\n                </div>\n            </v-card>\n        </template>\n    </v-container>\n</template>\n<style scoped>\n.card-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 16px;\n}\n</style>\n<script setup lang=\"ts\">\n/**\n * @component Provide a list whose values are displayed in cards grid, with API\n * similar to {@link OxListTable}.\n *\n * It set title to first header, subtitle to the second if provided.\n *\n * Headers, slots and fields works similar to what {@link OxListTable} does, but\n * adapted to the rendering context of a card.\n */\nimport { computed, onMounted, useSlots } from 'vue'\nimport { isEmpty } from 'lodash'\nimport { filterSlots, t } from '@oxylus/ox'\nimport OxActionEdit from './OxActionEdit.vue'\n\nconst slots = useSlots()\n// FIXME: only keep values\nconst itemSlots = filterSlots(slots, \"item.\", {exclude: [\"item.actions\", \"item.image\"]})\n\n\nconst props = defineProps({\n    /** ModelList used to display objects */\n    list: Object,\n    /** List items (cf. {@link useModelList}) */\n    items: Array,\n    /**\n     * Displayed fields, where the first value is set as title.\n     * Two formats: a string (as field name), or `{key: \"fieldName\", title: \"Field Title\"}`.\n     **/\n    headers: Array,\n    /** If True, display edit/view button */\n    edit: Boolean,\n    /** Field name used as image */\n    image: String,\n})\n\nconst headers = computed(() => {\n    if(!props.headers)\n        return []\n\n    const items = []\n    for(var header of props.headers) {\n        header = typeof header == \"string\" ? {key: header, title: t('fields.' + header) } : {...header}\n        header.slot = `item.${header.key}`\n        items.push(header)\n    }\n    return items\n})\n\n\nconst notHeaders = computed(() => new Set([\n    headers.value[0].key, headers.value[1]?.key, props.image\n]))\n\nonMounted(() => !props.list.length && props.list.load())\n</script>\n","<template>\n    <v-alert v-if=\"props.state.isNone && slots.none\" type=\"info\" variant=\"tonal\" class=\"mb-3\"\n            :state=\"state\" :title=\"noneTitle\">\n        <!-- @slot When state is `none`.\n             @binding {State} state used state. -->\n        <slot name=\"none\" :state=\"state\"></slot>\n    </v-alert>\n    <v-alert v-else-if=\"displayProcessing\" type=\"info\" variant=\"tonal\" class=\"mb-3\" closable\n            :state=\"state\" :title=\"processingTitle || t('state.processing.title')\">\n        <!-- @slot When state is `processing`. -->\n        <slot name=\"processing\" :state=\"state\">\n            <p>{{ t('state.processing.detail') }}</p>\n        </slot>\n    </v-alert>\n    <v-alert v-else-if=\"props.state.isError\" type=\"error\" variant=\"tonal\" class=\"mb-3\" closable\n            :state=\"state\" :title=\"errorTitle || t('state.error.title')\" >\n        <!-- @slot When state is `error`. -->\n        <slot name=\"error\" :state=\"state\">\n            {{ state.toString() || t('state.error.detail') }}\n    </slot>\n        <!-- @slot Detail when state is `error`. -->\n        <slot name=\"error-detail\" :state=\"state\"></slot>\n    </v-alert>\n    <v-alert v-else-if=\"props.state.isOk\" type=\"success\" variant=\"tonal\" class=\"mb-3\" closable\n            :state=\"state\" :title=\"okTitle || t('state.ok.title')\">\n        <!-- @slot When state is `ok`. -->\n        <slot name=\"ok\" :state=\"state\">\n            <p>{{ t('state.ok.detail') }}</p>\n        </slot>\n        <template v-if=\"messages\">\n            <v-divider/>\n            <p v-for=\"message in messages\">{{ message }}</p>\n        </template>\n        <!-- @slot Detail when state is `ok`. -->\n        <slot name=\"ok-detail\" :state=\"state\"></slot>\n    </v-alert>\n    <!-- @slot After the alert. -->\n    <slot :state=\"props.state\"></slot>\n</template>\n<script setup>\n/**\n * @component A component displaying alert based on provided {@link State} value,\n * wrapping `v-alert`.\n */\n// TODO: expandable detail error\nimport {defineProps, useSlots, computed, ref, watch} from 'vue'\nimport {VAlert} from 'vuetify/components/VAlert'\n\nimport {t, States} from '@oxylus/ox'\n\nconst slots = useSlots()\nconst props = defineProps({\n    /** The state. */\n    state: Object,\n    /** Delay PROCESSING state display by 5 seconds. */\n    delay: {type: Boolean, default: false},\n    /** Alert title on state `ok`. */\n    okTitle: {type: String, default: \"\"},\n    /** Alert title on state `none`. */\n    noneTitle: {type: String, default: \"\"},\n    /** Alert title on state `error`. */\n    errorTitle: {type: String, default: \"\"},\n    /** Alert title on state `processing`. */\n    processingTitle: {type: String, default: \"\"},\n})\n\n\nlet timeoutId = null\nlet expired = ref(false)\n\nwatch(() => props.state.state, (val) => {\n    if(timeoutId !== null)\n        window.clearTimeout(timeoutId)\n\n    if(!props.delay)\n        return\n\n    if(val == States.PROCESSING) {\n        expired.value = false\n        window.setTimeout(() => { expired.value = true }, 5000)\n    }\n})\n\nconst displayProcessing = computed(() => props.state?.isProcessing && (!props.delay || expired.value))\nconst messages = computed(() => props.state?.data?.messages)\n\n\n\n</script>\n","<template>\n    <div class=\"text-right\">\n        <v-btn color=\"error\" class=\"me-2\" :prepend-icon=\"props.resetIcon\"\n                @click=\"emit('reset')\"\n                :disabled=\"props.disabled\">\n            <!-- @slot Discard button default slot. -->\n            <slot name=\"discard\">{{ props.resetLabel || t('actions.discard') }}</slot>\n        </v-btn>\n        <v-btn v-if=\"props.state.isSending || props.state.isProcessing\"\n                color=\"primary\" :prepend-icon=\"props.processingIcon\" disabled>\n            <!-- @slot Processing button default slot. -->\n            <slot name=\"processing\">{{ props.processingLabel || t('actions.saving') }}</slot>\n        </v-btn>\n        <v-btn v-else color=\"primary\" :prepend-icon=\"props.validateIcon\"\n                @click=\"emit('validate')\"\n                :disabled=\"props.disabled || props.validateDisabled\">\n            <!-- @slot Validate button default slot. -->\n            <slot name=\"validate\">{{ props.validateLabel ||  t('actions.save') }}</slot>\n        </v-btn>\n        </div>\n</template>\n<script setup>\n/**\n * @component A component displaying buttons for validating or discard something, based\n * on a provided {@link State} (for processing state).\n */\n// TODO: provide more coherent names between slots, props and events.\nimport {defineEmits, defineProps} from 'vue'\nimport { t } from '../composables'\n\nconst emit = defineEmits([\n    /** Validate button has been clicked */\n    'validate',\n    /** Reset button has been clicked */\n    'reset'\n])\nconst props = defineProps({\n    /** The state object used. */\n    state: {type: Object, default: () => State.none()},\n    /** Button label for reset/discard */\n    resetLabel: String,\n    /** Button label for reset/discard */\n    resetIcon: {type: String, default: \"mdi-close-circle\"},\n    /** Button label for validation/save */\n    validateLabel: String,\n    /** Button label for validation/save */\n    validateIcon: {type: String, default: \"mdi-content-save\"},\n    /** Button label for processing */\n    processingLabel: String,\n    /** Button label for processing */\n    processingIcon: {type: String, default: \"mdi-content-save\"},\n    /** Disable buttons */\n    disabled: {type: Boolean, default: false},\n    /** Disable validation button */\n    validateDisabled: {type: Boolean, default: false},\n})\n</script>\n","<template>\n    <ox-state-alert :state=\"state\">\n        <template #none=\"{state}\">\n            <p>Please enter your credentials in order too proceed...</p>\n        </template>\n        <template #ok-detail=\"{state}\">\n            <p v-if=\"props.next\">You soon will be redirected to <i>{{ props.next }}</i></p>\n        </template>\n        <!--\n        <template #error=\"{state}\">\n            <ox-field-details :errors=\"state.data?.username\"/>\n            <ox-field-details :errors=\"state.data?.password\"/>\n        </template>-->\n    </ox-state-alert>\n    <template v-if=\"!state.isOk\">\n        <v-text-field variant=\"underlined\"\n                label=\"Enter login\" v-model=\"credentials.username\"\n                @keyup.enter.stop=\"passwordInput.focus()\"\n                >\n        </v-text-field>\n        <v-text-field variant=\"underlined\" ref=\"password\"\n                label=\"Enter password\" v-model=\"credentials.password\"\n                :type=\"showPassword ? 'text' : 'password'\"\n                :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                @click:append=\"showPassword = !showPassword\"\n                @keyup.enter.stop=\"login()\"\n                >\n        </v-text-field>\n        <div class=\"text-right mt-3\">\n            <!-- @slot Bottom of the form.\n                 @binding {string} password entered password\n                 @binding {string} username entered username\n                 @binding {async (): void} login run login\n                 @binding {Function} reset reset form\n                  -->\n            <slot name=\"bottom\" :password=\"credentials.password\" :username=\"credentials.username\" :login=\"login\" :reset=\"reset\">\n                <ox-validation-btn v-if=\"credentials.username && credentials.password\"\n                    validate-label=\"Login!\"\n                    @validate=\"login()\" @reset=\"reset()\"\n                    :state=\"state\"/>\n            </slot>\n        </div>\n    </template>\n</template>\n<script setup>\n/**\n * @component A form handling user login.\n */\n\nimport {computed, inject, ref, reactive, defineModel, defineProps} from 'vue'\n\nimport OxStateAlert from './OxStateAlert.vue'\nimport OxValidationBtn from './OxValidationBtn.vue'\nimport config from '../config'\n\nimport State from '../utils/state'\nimport {reset as $reset} from '../utils'\nimport {User} from '../models/auth'\n\n\nconst passwordInput = ref('passwordInput')\n\nconst props = defineProps({\n    /** Url to go once logged in. */\n    next: {type: String},\n    /** API url to call to log in. */\n    url: {type: String},\n})\n\nconst credentials = reactive({\n    username: '',\n    password: '',\n})\nconst showPassword = ref(false)\nconst state = reactive(new State())\n\n/** Reset credentials */\nfunction reset(resetState=true) {\n    $reset(credentials, {\"username\": \"\", password: \"\"})\n    resetState && state.none()\n}\n\n/** Run login and redirect to the next page if succeed. */\nasync function login() {\n    state.processing()\n\n    try {\n        const resp = await fetch(props.url, {\n            method: \"POST\",\n            headers: config.axiosConfig.headers,\n            body: JSON.stringify(credentials),\n        })\n        if(resp.status == 200) {\n            credentials.credentials = \"\"\n            credentials.password = \"\"\n            state.ok(await resp.json())\n\n            if(props.next)\n                window.location.href = props.next\n        }\n        else\n            state.error(await resp.json())\n    }\n    catch(error) {\n        state.error(error?.message || error)\n    }\n}\n\ndefineExpose({\n    /** Run login. */\n    login,\n    /** Reset login form. */\n    reset,\n    /** Current state. */\n    state\n})\n</script>\n","<template>\n    <ox-state-alert v-if=\"props.state\" :state=\"props.state\" delay/>\n\n    <template v-if=\"slots.prepend && panels.panel == panel.name\">\n        <!-- @slot At the top of the panel, between the OxStateAlert and the sheet. -->\n        <slot name=\"prepend\"/>\n    </template>\n\n    <v-sheet class=\"ma-4\">\n        <Teleport to=\"#app-bar-sheet-title\" :disabled=\"!mounted || panels.panel != props.name\">\n            <v-icon v-if=\"props.icon\" :icon=\"props.icon\"/>\n            {{ props.title }}\n\n            <!-- @slot After the panel title -->\n            <slot name=\"append-title\"/>\n        </Teleport>\n\n        <Teleport to=\"#app-bar-right\" :disabled=\"!mounted || panels.panel != props.name\">\n            <!-- @slot At the right of the app bar, before all other buttons. -->\n            <slot name=\"app-bar-right\"/>\n            <v-btn v-if=\"props.help\" class=\"ml-3\"\n                :href=\"props.help\" panels=\"new\"\n                icon=\"mdi-information-outline\" />\n        </Teleport>\n\n        <!-- @slot At the top of the panel, inside the sheet -->\n        <slot name=\"top\"/>\n\n        <slot name=\"default\">\n            <template v-if=\"views\">\n                <v-window v-model=\"panel.view\">\n                    <template v-for=\"(name, slot) in views\" :key=\"name\">\n                        <v-window-item :value=\"name\">\n                            <!-- @slot Views are nested under a `v-window-item`. -->\n                            <slot :name=\"slot\"></slot>\n                        </v-window-item>\n                    </template>\n                </v-window>\n            </template>\n        </slot>\n\n        <!-- @slot At the bottom of the panel, inside the sheet. -->\n        <slot name=\"bottom\"></slot>\n    </v-sheet>\n\n    <template v-if=\"slots.append && panels.panel == panel.name\">\n        <!-- @slot At the end of the panel, after the sheet. -->\n        <slot name=\"append\"/>\n    </template>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component Base component for displaying a panel.\n *\n * Required injections: `panels`, `panel`.\n */\n\n\nimport { defineProps, inject, onMounted, onUnmounted, ref, useSlots, watch } from 'vue'\nimport {filterSlots} from '@oxylus/ox'\n\nimport OxStateAlert from './OxStateAlert.vue'\nimport type {IPanelProps} from '../controllers'\n\nconst slots = useSlots()\nconst props = defineProps<IPanelProps>()\nconst views = filterSlots(slots, 'views.')\n\n// ensure teleport will be set after component has been mounted\nconst mounted = ref(false)\nonMounted(() => { mounted.value = true })\nonUnmounted(() => { mounted.value = false })\n\nconst panels = inject('panels')\nconst panel = inject('panel')\n</script>\n","<template>\n    <template v-if=\"tabs && Object.keys(tabs).length\">\n        <v-tabs v-model=\"tab\">\n            <slot name=\"tab\" v-if=\"slots.default\">\n                <v-tab :text=\"props?.title\" value=\"default\"/>\n            </slot>\n            <template v-for=\"(value, name) in tabs\">\n                <v-tab :value=\"value\">\n                    <slot :name=\"name\"/>\n                </v-tab>\n            </template>\n        </v-tabs>\n        <v-tabs-window v-model=\"tab\">\n            <v-tabs-window-item value=\"default\" v-if=\"slots.default\">\n                <slot name=\"default\"/>\n            </v-tabs-window-item>\n            <template v-for=\"(value, name) in windows\">\n                <v-tabs-window-item :value=\"value\">\n                    <slot :name=\"name\"/>\n                </v-tabs-window-item>\n            </template>\n        </v-tabs-window>\n    </template>\n    <template v-else>\n        <slot name=\"default\"/>\n    </template>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component This represent a single view inside a Panel.\n *\n * A view can have multiple windows, in such case it is displayed using tabs.\n * Tabs are hidden when there is only one window slot in it.\n *\n * The default slots are `default` (for the content) and `tab.default` (for the tab).\n * Other slots can be named following the convention: `window.[name]` and `tab.[name]`.\n */\nimport { ref, defineProps, onMounted, useSlots } from 'vue'\nimport { filterSlots } from '@oxylus/ox'\n\nconst props = defineProps({\n    /** Default tab title. */\n    title: String,\n})\n\n/** Current tab/window value */\nconst tab = ref(null)\n\nconst slots = useSlots()\nconst tabs = filterSlots(slots, \"tab.\", {exclude: [\"tab.default\"]})\nconst windows = filterSlots(slots, \"window.\")\n</script>\n","<template>\n    <!-- @slot Before v-form. See `default` slot for bindings. -->\n    <slot name=\"prepend\" v-bind=\"bind\"/>\n    <v-form ref=\"form\" v-model=\"editor.valid\" :disabled=\"!editable\">\n        <template #default>\n            <!-- @slot Inside v-form.\n                 @binding {ModelEditor} editor the editor instance.\n                 @binding {boolean} edited whether content has been edited\n                 @binding {v-form} form the inner `v-form`\n                 @binding {boolean} editable whether content is editable\n                 @binding {boolean} disabled whether content is not editable\n                 @binding {typeof Model} model current model type\n            -->\n            <slot name=\"default\" v-bind=\"bind\"/>\n        </template>\n    </v-form>\n    <!-- @slot After v-form. See `default` slot for bindings. -->\n    <slot name=\"append\" v-bind=\"bind\"/>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component A wrapper around a `v-form` that uses * {@link ModelEditor} to\n * edit and save data on the server.\n *\n * It checks on user permissions in order to allow edition. If user has no right\n * for it, the form will be disabled.\n *\n * It requires a `repo` to be provided.\n * Properties are defined using {@link IModelEditorProps} interface.\n *\n * Required injections: `user`.\n */\nimport { computed, defineExpose, inject, watch, ref } from 'vue'\nimport { t, useModelEditor } from '@oxylus/ox'\n\nimport type {IModelEditorProps} from '../controllers/modelEditor'\n\nconst form = ref(null)\nconst user = inject('user')\n\nconst props = defineProps<IModelEditorProps>()\nconst {editor, edited} = useModelEditor({props})\n\nconst editable = computed(() => user.can([editor.repo.use, 'change', props.initial]))\n\nconst bind = computed(() => ({\n    editor,\n    edited: edited.value,\n    form: form.value,\n    editable: editable.value,\n    disabled: !editable.value,\n    value: editor.value,\n    model: editor.repo.use\n}))\n\nwatch(() => editor.errors && Object.values(editor.errors), () => form.value.validate())\n\ndefineExpose({\n    /** The {@link ModelEditor} instance. */\n    editor,\n    /** A computed boolean indicating if content has been edited. */\n    edited,\n    /** A computed boolean indicating if content can be edited. */\n    editable,\n    /** Reference to inner `v-form`. */\n    form\n})\n</script>\n","<template>\n    <ox-state-alert v-if=\"modelEditor?.editor\" :state=\"modelEditor.editor.state\"/>\n    <v-container class=\"ox-model-edit\">\n        <ox-model-editor ref=\"modelEditor\" v-bind=\"modelEditorProps\">\n            <template #prepend=\"bind\">\n                <div v-if=\"!props.hideValidationBtn\">\n                    <slot name=\"prepend\" v-bind=\"bind\" :save=\"save\" :reset=\"reset\">\n                        <ox-validation-btn v-if=\"bind.editable && bind.edited\"\n                            @validate=\"save()\" @reset=\"reset()\" :state=\"bind.editor.state\" :validate-disabled=\"bind.editor.valid === false\"\n                            />\n                    </slot>\n                </div>\n            </template>\n\n            <template #default=\"bind\">\n                <slot name=\"default\" v-bind=\"bind\" :save=\"save\" :reset=\"reset\"/>\n            </template>\n\n            <template #append=\"bind\">\n                <slot name=\"append\" v-bind=\"bind\" :save=\"save\" :reset=\"reset\"/>\n            </template>\n        </ox-model-editor>\n    </v-container>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component A wrapper around {@link OxModelEditor}, providing a more\n * complete interface to handle object edition.\n *\n * It is used as standard edition component in edit views, and provides buttons\n * for validation ({@link OxValidationBtn}) and an alert.\n *\n * Slots are the same as the inner OxModelEditor, with two extra values: `save` and\n * `reset` which are used to save and reset current edited item.\n */\nimport { computed, defineExpose, defineEmits, watch, ref, onMounted } from 'vue'\nimport type { State } from '@oxylus/ox'\nimport { t, useModelEditor } from '@oxylus/ox'\n\nimport OxStateAlert from './OxStateAlert.vue'\nimport OxValidationBtn from './OxValidationBtn.vue'\nimport OxModelEditor from './OxModelEditor.vue'\n\nimport type {IModelEditorProps} from '../controllers/modelEditor'\n\ninterface IModelEdit extends IModelEditorProps {\n    /**\n     * Send data using `multipart/form-data` and form's `FormData`.\n     * The values will not be serialized into JSON before sending.\n     **/\n    sendFormData: boolean\n    /** If true, hide validation buttons */\n    hideValidationBtn: boolean\n}\n\nconst emits = defineEmits([\n    /** Item was saved `(editor: ModelEditor): void`. */\n    'saved'\n])\nconst props = defineProps<IModelEdit>()\nconst modelEditor = ref(null)\nconst modelEditorProps = computed(() => {\n    const {sendFormData, hideValidationBtn, ...vals} = props\n    return vals\n})\n\n/**\n * Reset editor to initial values (provided by component's props).\n */\nfunction reset() {\n    modelEditor.value.editor.reset(props.initial)\n}\n\n/**\n * Save changes to the server, returning editor state once completed.\n */\nasync function save(): State {\n    const me = modelEditor.value\n    const resp = (props.sendFormData) ?\n        await me.editor.save(new FormData(me.form.$el)) :\n        await me.editor.save()\n    emits('saved', modelEditor.value.editor)\n    return resp\n}\n\n\n// TODO\n// watch(() => modelEditor.edited, (val) => panel.setEdition(\"\"))\n\ndefineExpose({\n    /** Save edited item. */\n    save,\n    /** Reset edited item to initial value */\n    reset,\n\n    /** {@link ModelEditor} controller */\n    get editor() { return modelEditor.value.editor },\n    /** Item is edited */\n    get edited() { return modelEditor.value.edited },\n    /** Edition is allowed */\n    get editable() { return modelEditor.value.editable },\n    /** Inner OxModelEditor's form */\n    get form() { return modelEditor.value.form },\n})\n</script>\n","<template>\n    <ox-panel :name=\"props.name\" :title=\"panel.title\" :icon=\"panel.icon\"\n            :state=\"list.state\" :index=\"props.index\">\n        <template #append-title v-if=\"slots['append-title']\">\n            <!-- @slot After the panel title -->\n            <slot name=\"append-title\" v-bind=\"bind\" />\n        </template>\n\n        <template #prepend v-if=\"slots['prepend']\">\n            <!-- @slot At the top of the panel, between the OxStateAlert and the sheet. -->\n            <slot name=\"prepend\" v-bind=\"bind\" />\n        </template>\n\n        <template #append v-if=\"slots['append']\">\n            <!-- @slot At the end of the panel. -->\n            <slot name=\"append\" v-bind=\"bind\" />\n        </template>\n\n        <template #app-bar-right>\n            <!-- @slot At the right of the app bar, before all other buttons. -->\n            <slot name=\"app-bar-right\" v-bind=\"bind\"/>\n\n            <template v-if=\"panel.view.startsWith('list.')\">\n                <v-btn-group class=\"ml-3\" color=\"secondary\"\n                        density=\"compact\" variant=\"tonal\">\n                    <!-- @slot Navigation buttons for list views. -->\n                    <slot name=\"nav.list\" v-bind=\"bind\"/>\n                    <v-btn :title=\"t('actions.list.reload')\"\n                        :aria-label=\"t('actions.list.reload')\"\n                        @click=\"list.load()\">\n                        <v-icon>mdi-reload</v-icon>\n                    </v-btn>\n                    <v-btn v-if=\"filters\"\n                        :title=\"showFilters ? t('filters.hide') : t('filters.show')\"\n                        :aria-label=\"showFilters ? t('filters.hide') : t('filters.show')\"\n                        @click=\"showFilters = !showFilters\" :active=\"showFilters\">\n                        <v-icon :icon=\"filters.icon\"/>\n                    </v-btn>\n                </v-btn-group>\n            </template>\n            <template v-else-if=\"panel.view.startsWith('detail.') && panel.value\">\n                <v-btn-group class=\"ml-3\" color=\"secondary\" density=\"compact\" variant=\"tonal\">\n                    <!-- @slot Navigation buttons for detail views. -->\n                    <slot name=\"nav.detail\" v-bind=\"bind\"/>\n\n                    <template v-if=\"panel.view == 'detail.edit' && panel.value\">\n                        <v-menu>\n                            <template #activator=\"{props}\">\n                                <v-btn prepend-icon=\"mdi-dots-vertical\" v-bind=\"props\">\n                                    {{ t('actions') }}\n                                </v-btn>\n                            </template>\n                            <v-list>\n                                <slot name=\"item.actions\" :item=\"panel.value\"/>\n                            </v-list>\n                        </v-menu>\n                    </template>\n\n                    <v-btn :disabled=\"!prev\"\n                            :title=\"t('prev')\" :aria-label=\"t('prev')\"\n                            @click.stop=\"panel.show({view: panel.view, value: prev})\">\n                        <v-icon icon=\"mdi-chevron-left\"/>\n                    </v-btn>\n                    <v-btn :disabled=\"!next\"\n                            :title=\"t('next')\" :aria-label=\"t('next')\"\n                            @click.stop=\"panel.show({view: panel.view, value: next})\">\n                        <v-icon icon=\"mdi-chevron-right\"/>\n                    </v-btn>\n                </v-btn-group>\n            </template>\n\n            <v-btn-toggle class=\"ml-3\" color=\"secondary\"\n                density=\"compact\" variant=\"tonal\" mandatory\n                v-model=\"panel.view\"\n                >\n                <!-- TODO: permission check -->\n                <v-btn value=\"list.table\"\n                        @click.capture.stop=\"panel.show({view: 'list.table'})\"\n                        :title=\"t('panels.nav.table')\"\n                        :aria-label=\"t('panels.nav.table')\">\n                    <v-icon>mdi-table</v-icon>\n                </v-btn>\n                <v-btn value=\"list.cards\"\n                        @click.capture.stop=\"panel.show({view: 'list.cards'})\"\n                        :title=\"t('panels.nav.cards')\"\n                        :aria-label=\"t('panels.nav.cards')\">\n                    <v-icon>mdi-view-grid</v-icon>\n                </v-btn>\n                <v-btn value=\"list.kanban\" v-if=\"slots['views.list.kanban']\"\n                        @click.capture.stop=\"panel.show({view: 'list.kanban'})\"\n                        :title=\"t('panels.nav.kanban')\"\n                        :aria-label=\"t('panels.nav.kanban')\">\n                    <v-icon>mdi-view-column</v-icon>\n                </v-btn>\n                <v-btn value=\"detail.edit\" v-if=\"hasEdit\"\n                        @click.capture.stop=\"panel.show({view: 'detail.edit', value: panel.value})\"\n                        :disabled=\"!panel.value?.id && panel.view != 'detail.edit'\"\n                        :title=\"t('panels.nav.edit')\"\n                        :aria-label=\"t('panels.nav.edit')\">\n                    <v-icon v-if=\"user.can([panel.model, 'change'])\">mdi-pencil</v-icon>\n                    <v-icon v-else>mdi-eye</v-icon>\n                </v-btn>\n                <v-btn value=\"detail.add\" v-if=\"hasEdit && user.can([panel.model, 'add'])\"\n                        @click.capture.stop=\"panel.create()\"\n                        :title=\"t('panels.nav.add')\"\n                        :aria-label=\"t('panels.nav.add')\">\n                    <v-icon>mdi-plus-box</v-icon>\n                </v-btn>\n                <!-- @slot Inside the `v-btn-toggle` used to switch views. -->\n                <slot name=\"nav.views\" v-bind=\"bind\"/>\n            </v-btn-toggle>\n\n            <!-- @slot After button toggle used for switching views. -->\n            <slot name=\"app-bar-end\" v-bind=\"bind\"/>\n        </template>\n\n        <template #top>\n            <v-alert v-if=\"props.warning\" type=\"warning\" variant=\"tonal\" :text=\"props.warning\" />\n            <!-- @slot At the top of the panel, before list filters. -->\n            <slot name=\"top\"/>\n            <ox-list-filters ref=\"filters\"\n                    v-show=\"panel.view.startsWith('list.') && showFilters\"\n                    :search=\"props.search\"\n                    teleport-to=\"#panel-list-actions\">\n                <template #default=\"bind\">\n                    <!-- @slot Where to put the lists filters. Bindings are thoses provided by default slot of {@link OxListFilters} -->\n                    <slot name=\"list.filters\" v-bind=\"bind\"/>\n                </template>\n            </ox-list-filters>\n        </template>\n\n        <!-- list.table is always provided -->\n        <template #views.list.table v-if=\"!slots['views.list.table']\">\n            <ox-list-table :list=\"list\" :items=\"items\" :headers=\"headers\" :edit=\"hasEdit\">\n                <template v-for=\"(_, name) in itemSlots\" v-slot:[name]=\"bind\" :key=\"name\">\n                    <slot :name=\"name\" v-bind=\"bind\"/>\n                </template>\n            </ox-list-table>\n        </template>\n\n        <template #views.list.cards v-if=\"!slots['views.list.cards']\">\n            <ox-list-card :list=\"list\" :items=\"items\" :edit=\"hasEdit\"\n                    :headers=\"props.headers\">\n                <template v-for=\"(_, name) in itemSlots\" v-slot:[name]=\"bind\" :key=\"name\">\n                    <slot :name=\"name\" v-bind=\"bind\"/>\n                </template>\n            </ox-list-card>\n        </template>\n\n        <template v-for=\"(name, slot) in viewsListSlots\" v-slot:[slot]>\n            <!-- @slot Views are prefixed with `views.`\n                 @binding {Panel} panel the panel controller\n                 @binding {Panels} panels the panels controller\n                 @binding {ModelList} list the model list\n                 @binding {Model[]} items the list of items fetched by the model list\n                 @binding {(Model): void} saved the function called once an item is saved\n                 @binding {Model} value current item being edited/displayed\n            -->\n            <slot :name=\"slot\" v-bind=\"bind\"/>\n        </template>\n\n        <!-- FIXME: views.detail.edit shall be sloted too, not only nested ones? -->\n        <template #views.detail.edit v-if=\"hasEdit\">\n            <ox-view :title=\"t(`models.${panel.model.entity}`)\">\n                <template v-for=\"(name, slot) in editSlots\" #[name]>\n                    <slot :name=\"slot\" v-bind=\"bind\"/>\n                </template>\n            </ox-view>\n        </template>\n    </ox-panel>\n</template>\n<script setup lang=\"ts\">\n/**\n * @component A panel for displaying model views, linked to a provided repository.\n *\n * It provides different views by default: `views.list.table` ({@link OxListTable}), `views.list.cards` ({@link OxListCard}). You want to implement `views.detail.edit` slot.\n *\n * It is responsible to fetch data from the server, display the items, switch between different\n * views.\n *\n * Required injections: `panels`, `panel`, `user`.\n *\n * ## Views\n *\n * Views are provided as slots, using prefix `views.[list|detail].[name]`. Views are of two type: list and detail.\n *\n * For `views.list.table`, `views.list.kanban`, `views.list.cards`, `views.detail.edit`, button will be provided in the top bar if the slots are present. Extra buttons can be added in `nav.views` slot.\n *\n * Slots prefixed with `item.` will be forwarded down to all list views.\n */\nimport { computed, defineProps, defineExpose, inject, useTemplateRef, useSlots, toRefs, withDefaults, watch } from 'vue'\nimport { Teleport } from 'vue'\n\nimport OxAction from './OxAction.vue'\nimport OxListFilters from './OxListFilters.vue'\nimport OxListTable from './OxListTable.vue'\nimport OxListCard from './OxListCard.vue'\nimport OxPanel from './OxPanel.vue'\nimport OxView from './OxView.vue'\nimport OxModelEdit from './OxModelEdit.vue'\n\nimport {t, filterSlots, useModelPanel} from '@oxylus/ox'\nimport type {IModelPanelProps} from '../controllers'\n\nconst slots = useSlots()\nconst viewsListSlots = filterSlots(slots, 'views.list.')\nconst itemSlots = filterSlots(slots, 'item.')\nconst editSlots = filterSlots(slots, 'views.detail.edit.')\nconst hasEdit = computed(() => !!Object.keys(editSlots).length)\n\nconst filters = useTemplateRef('filters')\nconst props = withDefaults(defineProps<IModelPanelProps>(), {\n    index: 'list.table',\n    search: 'search',\n    fetchRelations: true,\n})\n\nconst user = inject('user')\nconst {panel, list, items, next, prev} = useModelPanel({props})\nconst panels = panel.panels\n\nconst canEdit = computed(() =>  user.can([panel.model, panel.value?.id ? \"change\": \"add\"]))\n\nconst {showFilters} = toRefs(panel)\n\n/** List table headers */\nconst headers = computed(() => [\n    ...props.headers,\n    {key: 'actions', title: t('actions')},\n])\n\n/** This is called by editors once object has been saved */\nfunction saved(item) {\n    item = new props.repo.use(item)\n    panel.show({view: panel.view, value: item})\n    list.load()\n}\n\nconst bind = computed(() => ({\n    panel, panels, list, items,\n    saved,\n    value: panel.value,\n}))\n\nwatch(() => Object.values(list.filters), () => list.load())\n\ndefineExpose({\n    /** The ModelList being used across all views */\n    list,\n    /** The {@link OxModelPanel} controller */\n    panel,\n    /** The actual list of items */\n    items,\n    /** URL to next page. */\n    next,\n    /** URL to prev page. */\n    prev\n})\n</script>\n","import * as ox from './ox'\nimport {components as vendor} from '@oxylus/ox/vendor'\n\nexport * from './ox'\n\n\n/**\n * This is the base app config used for Oxylus' Vue based applicationns.\n *\n * It includes Oxylus components and some Vuetify's ones.\n *\n *\n * @example\n * // Example app.ts for another application.\n *\n * import {App} from '@oxylus/ox/components'\n * import * as components from './components'\n *\n * export default {\n *     extends: App,\n *     components,\n * }\n */\nexport const App = {\n    el: \"#app\",\n    delimiters: ['[[', ']]'],\n    components: {...ox, ...vendor},\n}\n"],"names":["props","__props","attrs","useAttrs","emits","__emit","user","inject","run","processing","allowed","useAction","_unref","_createElementBlock","_Fragment","_openBlock","_createBlock","_component_v_btn","_mergeProps","_component_v_list_item","panel","repos","item","OxAction","t","api","ref","panels","computed","shouldShow","x","show","vals","_component_v_list_group","_withCtx","itemProps","_createVNode","sub","i","_component_ox_app_nav_item","_component_v_list_subheader","_createTextVNode","_toDisplayString","_renderList","drawer","_useModel","opened","items","updateOpened","getOpened","val","_component_v_navigation_drawer","$event","_component_v_list","_renderSlot","_ctx","OxAppNavItem","slots","useSlots","panelsSlots","filterSlots","nav","reactive","context","useAppContext","usePanels","onMounted","watch","onErrorCaptured","err","instance","info","_component_v_app","_component_v_snackbar","_cache","_component_v_app_bar","_component_v_app_bar_nav_icon","_component_v_app_bar_title","_createElementVNode","OxAppNav","_hoisted_1","_component_v_img","_component_v_main","_component_v_tabs_window","bind","name","slot","_component_v_tabs_window_item","value","search","state","query","fetch","useQuery","selected","getItems","ids","missingIds","getMissing","resp","updateSelected","v","itemIds","id","lastSearch","load","debounce","reset","q","filters","entities","unionBy","ifNotEqualFn","old","__expose","VAutocomplete","slotProps","_","_normalizeProps","_guardReactiveProps","_sfc_main","component","shallowRef","is","defineAsyncComponent","h","OxAutocomplete","fieldProps","helpKey","obj","args","helpText","rules","_component_v_select","_component_v_textarea","_component_v_checkbox","_component_v_text_field","list","useModelList","Query","remove","ifNotEqual","_withModifiers","hasFilters","k","icon","_component_v_toolbar","$t","$events","_component_v_list_item_title","newItem","can","_a","addItem","removeItem","index","OxFormListItem","_component_v_form","_component_v_divider","color","idx","assign","result","sorted","_component_v_sheet","_component_v_slide_group","header","_component_v_slide_group_item","selectedClass","_component_v_card","_component_v_card_title","itemSlots","headers","dst","field","tKeys","updateOptions","event","params","key","order","_component_v_data_table_server","OxActionEdit","notHeaders","_component_v_container","_hoisted_2","_component_v_avatar","_component_v_card_item","_hoisted_3","_component_v_label","isEmpty","_component_v_card_actions","_b","expired","States","displayProcessing","messages","VAlert","message","emit","passwordInput","credentials","showPassword","State","resetState","$reset","login","config","error","OxStateAlert","_withKeys","OxValidationBtn","views","mounted","onUnmounted","_Teleport","_component_v_icon","_component_v_window","_component_v_window_item","tab","tabs","windows","_component_v_tabs","_component_v_tab","form","editor","edited","useModelEditor","editable","modelEditor","modelEditorProps","sendFormData","hideValidationBtn","save","me","OxModelEditor","viewsListSlots","editSlots","hasEdit","useTemplateRef","next","prev","useModelPanel","showFilters","toRefs","saved","OxPanel","_component_v_btn_group","_component_v_menu","_component_v_btn_toggle","_component_v_alert","OxListFilters","_vShow","OxListTable","OxListCard","OxView","App","ox","vendor"],"mappings":"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"}
